# PyFinance - Portfolio Analysis and Optimization Toolkit

## Description

PyFinance is designed for financial analysis. Its goal is to simplify and provide a comprehensive set of tools for creating portfolios, analyzing performance and performing efficient portfolio optimization strategies. It provides functionality to retrieve stock and crypto market data, build custom portfolio, assess historical risk adjusted performance, and apply optimization techniques, making it a great tool for both beginners and financial experts.

The tool is architect designed with Python and uses libraries for fast data analysis. Data can be downloaded, and calculations can be completed in a fraction of a second, enabling quick analysis of market trends. The tool provides a streamlined approach to the often convoluted tasks that are inherent with portfolio analysis and allows for the easy implementation of complex optimization routines to build a portfolio that meets the specific requirements of a user.

PyFinance supports a broad range of financial instruments beyond typical equities and provides the ability to incorporate assets like commodities or derivatives to allow a user to create a well diversified, comprehensive portfolio. A core principle has been the design of the tool to be extensible so users can easily implement their own models without being restricted to a limited set of available functions or assets.

The core features revolve around retrieving market data, creating portfolios, risk analysis with Sharpe Ratio, Beta and Drawdown calculations, as well as a portfolio optimization module allowing for the creation of a portfolio which maximizes returns given a specific risk tolerance by leveraging efficient frontier techniques. We also aim at incorporating a back tester that would allow a user to test different portfolio compositions over different horizons to validate a strategy' impact.

PyFinance's modular design and comprehensive functionalities aim to be invaluable to students, researchers, and financial professional who needs a reliable, customizable, and high-performance solution for financial portfolio optimization. We are also striving to create interactive data visualization dashboards, to help users easily grasp the impact of their portfolio.

## Installation Instructions

Before proceeding make sure you have Python 3.7 or newer installed. The project uses Poetry for dependency management, so make sure you have it set up on your local environment. 

You can download Poetry from https://python-poetry.org/ or using your system's package management tools. Ensure that your Python installation path is correctly added to your environment variables, so that Poetry can be found and executed.

Clone the PyFinance repository from GitHub using the following code:

```bash
git clone https://github.com/yourusername/ PyFinance.git
```

Navigate to the newly created PyFinance directory in your terminal:

```bash
cd PyFinance
```

Run ` Poetry install ` to automatically download and install all dependencies listed in the Poetry `pyproject .toml` file. Make sure you are in the root directory of the repository as it is the location where the project configuration is located. This command reads all necessary package requirements listed in our pyproject file and automatically download those packages.

On Linux and macOS systems, you should be able to execute this command without facing additional challenges, provided that Poetry has been installed and the Python interpreter configured. However, ensure to set correct path permissions in the terminal before trying the execution.

Windows users will need to have Git for Windows or equivalent configured with proper paths for command execution. If using Anaconda distribution on Windows, make sure that you select "Add to PATH" when the conda install finishes and that your anaconda envirnoment contains poetry and its necessary modules

Poetry installs the Python libraries within the PyFinance directory into an isolated Python virtual environment so dependencies of the projects will be contained inside a single space to not affect globally-installed Python package and modules

Once installation completes successfully, your shell command should produce a list of the dependencies downloaded.  You should be prepared with the latest version, to begin to explore functionalities and contribute!

We have tested these on various configurations with the help of CI. We will provide more comprehensive documentation as it comes available on how the system should perform in a specific context or platform and we are also happy to incorporate your feedback as they get shared

To ensure all the necessary dependencies were added correctly verify your local Python env and modules. If you face an errors with installing, you will need to consult our Github issues section to determine if others have encountered similar installation concerns and how we resolved the problem or to propose potential workarounds!

We recommend using Python venv or a Poetry managed environment during deployment to reduce dependencies. To use venv you have to use Python and create venv environment to keep packages separated with different deployments!

You should now have a local Python enviromnent with every dependency necessary to work on PyFinance and to execute a few quick checks that confirm you setup your env successfully

## Usage Instructions

Let begin your analysis and get into the system using simple example! To retrieve current Stock Data use our built in function for stock quotes! 

```python
from pyfinance import DataFetcher

fetcher = DataFetcher()

ticker = "AAPL"
quote = fetcher.get_quote(ticker)
print(quote)
```

As an output we would see a json containing details for the AAPL, and we would also want to use our function ` fetcher .fetch_history `.  For a 30-day period:

```python
history = fetcher.fetch_history(ticker, "30d")
print(history)
```

Now with a historical record for our Ticker, lets build an elementary Portfilio, let assume the goal is create the best combination from our Ticker!
```python
from pyfinance import Portfolio

portfolio = Portfolio()
portfolio.add_asset("AAPL", 0.6)
portfolio.add_asset("MSFT", 0.4)

#Calculate Portfolio Return

ret = portfolio.calculate_return()

print (ret)
```

Let extrapolate a bit, lets say now that you are in front with your portfolio with a historical set, we will like to analyze and see where are its weakness using the tools! We could start assessing our DrawDown using this:

```python
from pyfinance import PerformanceMetrics

drawdown = PerformanceMetrics(history)
dd = drawdown.calculate_drawdown()
print(dd)
```

Now, to optimize your porfolio use another modulus of pyfinance with optimization! 
To build a robust and diverse investment portflio that can adapt with the market and minimize any losses we should incorporate our portfolio-optimozer to optimize for a certain risk level:
```python
 from pyfinance import PortfolioOptimization

optimizer = PortfolioOptimization(history,risk_aversion=0.5)
optimal_weights = optimizer.optimize_portfolio()
print (optimal_weights)
```

For an in-depth explanation and other functionalities please review your project documentation, or refer our online API and documentation! The code examples can give more guidance as well on specific functions, as they were crafted with care with different edge scenarios

You may notice, as with our API reference we do expect that all our data is stored inside pandas series. This will make our API consistent and also easier to read with a lot of other financial models out there

The API supports other data retrieval tasks as fetching news articles related to financial topics and providing an overview to understand what may happen in our porfolio as market sentiment and macro factors are considered,

We are working hard at integrating the system for Cryptocurrency, which will be very useful to our clients and we hope to add them by year two, to provide more robust capabilities in asset and investment analysis! 

Our goal, beyond these functionalities is providing our customers and developer the tools that would let then customize our functions, so you would feel at freedom at your analysis process, with little restriction to a limited scope set of functionalities.

You could extend your code or add new functionalities and modules using your knowledge or leveraging our code as base for any project! 
If a feature does not exists or it would improve a current process or module you are encouraged to propose new improvements! 

## Configuration

PyFinance configuration is controlled primarily through a configuration file located at `config/config.yaml` which contains default API settings to interact with various services

By default this includes our stock market, API access tokens (to retrieve financial history), default assets or portfolios we have in mind for quick tests and default portfolio settings, as weights in different portfolios. Some other configurations that you should review in case a customization are included below: 

You may override values set inside our configs file. If we donot want an asset to appear during an API query or during an evaluation for an analysis process this can be easily controlled through an external file. This allows developers flexibility without impacting code if they prefer external management, to manage and modify values on-the-fly and in-context during the program run without altering the codebase directly.

The most crucial parameters that we would want that users customize and consider for optimal configurations would involve data sources to access our services. We have multiple data services, so that you are prepared to work on with high speed with any environment. You would have a list on what we have for our data and API access keys to use

You have multiple envirnment varibles available. Most common one to set include:

-`API_KEY = ` to authenticate for data requests! Provide access to your services for retrieving stock information in a real-time fashion! 
-`TIMEOUT =` which determines maximum response for data requests and is very valuable in environments, to manage your network performance or avoid errors from API! 

We use python environment for managing configs as it gives better performance for large datasets. We use environment varables to allow a quick switch and configuration as it helps maintain data access without affecting codebase directly 

You could further define the `PortfolioSettings.yml ` as external file. You would define the portfolio parameters in this external settings for quick analysis! 
These parameters define default weights as a default asset to evaluate during testing to help the users with getting their feet up on the tool and also for benchmarking 

The configurations should give users enough power at customizing and setting our system with a minimum of changes, and the documentation along side this would explain everything to a T 

We also support the use of CLI parameters, to pass configs in our terminal, as this helps developers who would have quick changes in testing and do so in place, instead to modify external configurations! This feature has the goal for providing additional UX as developers may prefer! 

## Project Structure

The project utilizes a structured layout designed for maintainability and extensibility, so we can add a lot of functionality and new classes and modules with a good separation between code concerns

The project's primary structure includes these components, with detailed descriptions on the directory layout:

-   `src/`: contains our python files for analysis and models for different scenarios in finance 
-   `config/`: contains the `config.yaml ` that is a critical component, that defines how to use API tokens and data requests
-   `tests/`:  houses automated integration testing for ensuring code reliability with various use scenarios with multiple edge conditions 
-   `data/`:  this will store all historical data for backtests.
-   `README.md`:  instructions that guide our users for a proper understanding and set-upp on the software and documentation of functions available 
-   `pyproject.toml`: configuration file to define poetry and our environment dependencies to build

The src dir, is further split by module and contains all of python models for each task
* pyfinance/ `DataFetcher`: contains the module used for fetching financial assets 
* `Portfolio:` defines and creates portfolio
* `PerformeMetrics` : implements all calculation of key performance for the `performance_indicators`.  This also contains a submodule called module
`PyFinance.Optimization.OptimizationModule:` contains functions needed for optimizing your portfolios 

## Contributing

We are excited and open to new collaborators for helping future developments! 

To submit your enhancements, please start with submitting an issue in the Github repository for discussing any ideas.  

Create an environment for developing using the setup described. Fork your version for testing, and add your new code there, following coding standard. Make small changes with descriptive comments on your contributions, and we would welcome you and make changes in time for the best!  
Ensure unit and Integration test for your new contributions so to keep a clean project without breaking anything that would impact performance and stability on existing functionalities

Please read `CodeStandard ` that describes coding standards on our codebase. It has instructions with our linter to enforce coding quality, readability to keep code easy and to understand 

We are very happy at helping newcomers and providing any information, but if we are unable we are more than excited for getting new collaborators in our community for developing! Please submit pull requests. 

## License

This project is licensed under the MIT License. You are free to use, modify, and distribute the software as long as you include the original copyright notice and license. You must give appropriate credit by providing a link to the license if you use this code in your work

The main obligation needs that the source be available. Any modifications that you may apply must not infringe on our original intellectual propertry and should provide attribution when referencing this original license

## Acknowledgments

We want to acknowledge a list of key contributors in developing and reviewing. The open community is amazing to provide great insights on what needs more focus!  A great appreciation needs that be directed for: 

* [Awesome Pandas Cheat Sheet](https://pandas.pydata.org/docs/getting_started/zfill.html): We relied extensively in Pandas CheatSheet when designing the core functions for DataAnalysis!

* Stack Overflow - a valuable reference and source of inspiration in solving coding challenges and improving performance
We have used this community to understand edge scenario with financial markets as well as understanding and building rich data analysis functions.
The open finance research communities that have provided a foundation, insights and tools, in designing financial algorithms, models as a great example
We also thank for the contributors and libraries in Python community that are used by our core functions and and data retrieval! Without the amazing ecosystem for development on open softwares this would be difficult 

We would love for our community at sharing any resources as the open financial ecosystem evolves. If you have an open-souce tools for data or finance models please share them for future consideration on the community 

## System Architecture

The current PyFinance is designed with the principles of a Modular system, to promote scalability, reusability of the design as well for a clear understanding.
Here are components for architecture overview of the core functions, as data flow between functions!

1.  **Data Retrieval Module:** The primary responsibility lies here on downloading, accessing external API data for retrieving stock data from multiple market sources.  API access token, timeout variables is configured by configs and the API access key. Data are then parsed with JSON and store for later consumption in series!
2.  **Portfolio Building and management module:** After retrieving historical data from our data sources this modules defines, constructs different financial models by setting assets, portfolio and other parameters.  After constructing it will also provide an assessment on key metrics and performance previously discussed in usage! 
3.  **Risk Assessment:** We will implement a model to asses and understand our risk tolerance using various statistical techniques for assessing drawdown and overall alpha of a given strategy's historical records! The goal in this is identifying weakness on the models 
4.  **Portfolio optimization** : A set of functions and optimization modules is built on an efficient approach of creating the portfolio which maximizes a specific performance indicator given our specific requirements 

We aim that we use Python to have fast and reliable connections for high traffic requests, with modular components.  
These functions and API connections would allow a high amount of throughput as it's easy scalable, and can also adapt when new requirements arrive as the risk and volatility of our portfolios increases
In future versions we expect a distributed data processing as an additional enhancement!  For high volumes data sources this could provide better performance, with more resources 

## API Reference

PyFinance offers the flexibility that allows for customization in your projects and models for a broad set of scenarios. We aim to provide simple, consistent usage for accessing key functions in your projects 

`DataFetcher `
 -  ` get_quote (` *ticker :String )*- return json for stock with current price

 -  ` fetch_history (`* ticker : String *,*period *: string )- returns a historical time frame in dataframe for stock data and metrics. 

 `Portfolio`:
-   ` add_asset ` (*symbol :String *,* weight : Double)* : Adds assets to your Portfolio
 -  ` calculate_return(` *portfolio*: Portfoliomodel) return Double.  Return performance in % as calculated with portfolio composition
 - ` Portfolio ` (weights): Constructor and portfolio builder with custom assets weights and configurations for a custom build
  
` PerformanceMetrics` 
-` Calculate Drawdown` (* history: dataframe)- return a time horizon series with maximum drawdown in percentage for assets and portfolios.   The historical series needs an index and dates in correct form 

*Note we use pandas series and models internally and we will keep our data as pandas dataframe series.* We have made an intention of being consistent in how API functions receive data!   You might need a quick tutorial for understanding this if unfamiliar to this framework, and a documentation for how the models work can assist as well, if no API function returns as expected or not formatted to what needs

## Testing

We heavily rely on automated and Integration testing as the foundation with a quality software and reliability for the community!

Before executing test please review setup to verify environment is set for executing tests with pytest! 

Run test cases through: pip install pytest

Once set run tests through 

`pytest -- pytest ./ tests. / ` in root Directory for PyFinance

These commands are used by automated testing frameworks. These configuration allows us, with our Continuous Integration framework that checks if new functionalities breaks existing code, which gives the confidence of our product 

Unit Test for individual functions and Integration Test for the full models and workflows that can assess a full end scenario. 

Our current test structure has multiple scenarios that test end scenarios such that you do have more trust that you could implement new features!  Please feel to contribute new testing cases and expand your scenarios! 

## Troubleshooting

A couple known errors you should consider during implementation or testing

 - ` ImportError -` Missing module dependencies for API calls . This can occur when missing libraries such dependencies are no properly imported, ensure Poetry dependencies are correct by re- running ` install` .
- * TimeoutErrors - API is timingout and no responses* Verify that connection and access credentials API access, are correct
 - `InvalidData Error* - Incorrect date format or invalid stock data is given, make sure all date parameters in your functions are set and formatted for our system . If data does not look normal doublecheck our Data Source.

The most recent troubleshooting and solutions is at our repository and GitHub. Share and collaborate as a form for the greater group for all members in our ecosystem to share information on any issue or problem they encounter and resolve the challenges.  This helps us maintain the community for better support as the usage increase over the coming days

## Performance and Optimization

As an optimization effort on speed the tool can benefit in parallel computing for high load API calls which allows multiple concurrent data access and downloads at scale to minimize wait and optimize the processing 

To enhance speed for large-dataset calculations we leverage NumPy, pandas optimized data frames to improve data processing speeds 
To benchmark our code, we can also profile with integrated functions, such tools, can also reveal the areas that would take the maximum time 

In general, we encourage you on improving the code and providing your suggestions. 
If any improvements would allow a performance jump feel welcome at providing pullrequests with the code to enhance speed for our customers in different workloads as performance can differ with various usage cases 

## Security Considerations

Protect secrets and secure data access as critical points, especially as our system retrieves sensitive info such financial records, as data, or credentials. API keys and sensitive keys for accessing the services

- We advise storing sensitive keys and configurations externally as separate configs that would never enter version controls. 
  We advise on the best method, such as storing on secure secrets management for external systems.  If this occurs we should ensure access with appropriate credentials for access 
 
 Input sanitation as another consideration to avoid data manipulation. Input Validation as part our system and models, helps in avoiding malicious code that could cause errors in execution

  For a robust solution consider regular scanning to scan vulnerabilities to protect system. We should follow a patching schedule to keep systems up-to-date.  For additional information on our practices for patching see our GitHub and open- source documentation!

## Roadmap

The plan of development has many milestones as well enhancements and features we aim to incorporate into upcoming future updates:
 - LO Implement an end-to-end backtester: Allow historical simulations using historical records, and different strategies. The aim would be allowing the community at validating the impact on various assets 
- Add a visual dashboard: Build user friendly visual representations on assets as it makes our system easy, user, to digest. The interactive graphs and visualizations allow us for a clear and better insights. 
- Add additional financial derivatives: We are considering incorporating other complex instruments as a financial derivatives which should allow our users for advanced modeling! This enhances and increases flexibility and scope in modeling financial data.
- Add more risk analysis functions, as stress analysis: This would allow for additional stress on our data models! Stress and risk assessments allow the model users, at understanding the risk tolerance.
We have an agile and flexible process for developing the roadmap so the open and collaborative community can provide their thoughts to additional functionalities 

## FAQ (Frequently Asked Questions)

What dependencies can cause crashing on execution,
* Verify Python installation with dependencies and versions. Ensure your version is consistent and supported for your OS, to eliminate conflicts and errors
  If you get an " import Error * , check dependencies for proper libraries 
   Verify and review installation and configs as described, in setup. Check environment paths. and verify the system 

Is our project compatible across Linux / MAC or Window ? 

Yes it has broad cross compatibilility with multiple window managers on whichever platforms you may choose!

## Citation

When publishing any scientific papers using the results derived through analysis using this software it should include citation to ensure attribution for use of resources in academic works as a reference to original works

* BibTeX Entry:

```bibtex
@software{PyFinance,
 author = {Your Name},
 title = {PyFinance - Portfolio Analysis and Optimization Toolkit},
 url = {https://github.com/yourusername/PyFinance},
 year = {2024},
 version = {1.0.0}
}
```

For a proper referencing ensure the BibTex details match to the specific package, versions as you utilize, as well any modifications applied to code

## Contact

We welcome your contributions as feedback, issues or bug submissions

Please send email to our dedicated contact team:

PyFinanceSupport@Youremail . com 

Our GitHub Issues repository has an active section to share issues and bugs for tracking purposes 

Feel open with any suggestions!  
Our Community forum and channels are available as a collaborative discussion as it would create better products for everyone 
