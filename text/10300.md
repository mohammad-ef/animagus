# Task Scheduling System - TSSv5 

## Project Title

##1  Description
The Task Scheduling System is a lightweight, extensible task queue designed for asynchronous job processing. It simplifies managing tasks across multiple worker processes with robust scheduling, retry mechanism, and progress tracking. The project addresses common challenges encountered in handling time-consuming or event triggering operations within an applications.

Designed as a modular system, TSSv5 enables easy customization of task serialization, storage and worker logic. It is written in Python to enable a fast and simple development. We aim for a production ready and easily deploy system that requires little maintenance after its initial setup and configuration. 

TSSv5 offers a web interface, enabling a user to visualize and manage the state of tasks within the queue, providing a simple dashboard to track the performance and health of the scheduling system. It provides insights into task completion rates, failures, and potential bottlenecks in the execution.

This system is especially useful in web applications that need to execute complex background operations, such as email sending, data processing, or image resizing. The asynchronous nature allows the main application threads to remain responsive and efficient while the scheduled jobs complete in the background.

With a robust architecture, TSSv5 offers a scalable and adaptable task scheduling framework suitable for both single-server setups and distributed environments, and can be extended using its flexible API for a range of specific uses.

 ##2  Installation Instructions
To setup TSSv5, you require a Python 3.8 or higher, and pip, the Python Package Index installer. It is highly recommended to install it within a venv virtual python environment to avoid potential compatibility issues with system installed libraries and packages.

Ensure you have Python 3 or higher installed on your system.  To verify installation, execute: `python --version `.  If the installation fails, visit python.org for installation instructions based on your OS.  

The first step is to create the python virtual environment. Navigate to the directory where you intend to install TSSv5. Run the following code to create a new venv environment, which is a directory with its own isolated python and dependencies installation: ``python3 -m virtualenv  venv``

Activate your new virtual environment using the command: ``source venv/bin/activate``  This step isolates the project dependency from your systems other applications.  You will see a prefix of (venv), which is a visual confirmation that the environment is activated.

Navigate to the base folder of the project. To install the required packages using pip, run the `pip installation` command, as shown below. This command installs the dependencies specified in the project's `requirements.txt`file which are used by the system.

  ``pip install -r requirements.txt``

The `requirements file` includes all of the dependencies required to run TSSv5, which can be automatically resolved using `pip`. This process may take a few minutes, based on your network speed and system specifications.

For database setup you need to run the following command: ` python db_initialize.py ` This command creates the database schema, and creates the default configurations.

On Linux, after successful installation and database configuration run `sudo systemctl start tss` to start the background tasks in an active and running process, that runs constantly without manual interference.

If installation errors persist or packages don't appear install check you python environment version using: ``python --version ``and that venv has been set to this environment before installing packages. 

You will know installation succeeded, if after completion, a folder called venv and all packages listed in requirements are shown as succesfully downloaded in terminal

##3  Usage Instructions
TSSv5 supports two methods for submitting new jobs - the web interface for user driven jobs and command-line interface, and direct function invocation from your project.

For the most immediate and easy-to-start approach, launch the system via the python script with: ``python run.py``. Once active it opens a default localhost interface. The interface presents a UI of currently running, complete and queued tasks

The `submit` method is used via python script as ` from scheduler import create_task `.  Create an instance using  ``my_task = create_task("function_name", arg1, arg2,  ...) `` which will queue an task and execute it using background processes when ready. 

The `run` module also exposes CLI usage to create tasks from the console: `` tss_run task add function_name arg1 arg2 `.  The function name can contain multiple variables, but all should correspond with your configured tasks functions in scheduler module.

TSSv5 has default logging to `/var/log/tss` where errors, executions and completions can be visualized as an operational guide and to debug failures or errors when using TSSv5.
 The dashboard will provide visual feedback, including a status checklist showing task progression

To check running and pending status in real time execute python module ``python run_tasks.py `. 

TSSv5 provides advanced features via its web ui - including scheduling specific run times via date or interval

TSSv5 offers automated monitoring for failure events with configurable alerts, allowing prompt resolution or debugging issues when tasks encounter error

Advanced tasks allow to create periodic tasks for scheduled re-processing and can handle complex workflows using dependencies and chains to ensure correct task sequence 

If you need custom tasks, the scheduler module contains function creation guidance, with a setup and initialization procedure for custom execution.  This module can contain new methods with a specific name

If any unexpected behaviour or problems arise in usage from CLI use, launch ``tss-ui`. which can assist and diagnose failures 

##4 Configuration
The main configuration of TSSv5 is contained within `config.yaml` file. The database is configured here as well.
The file specifies settings to tune and configure the project behavior for different needs, such as changing default port or increasing logging details for debug and diagnostics purposes 

Modify the  `db_connection_string` property inside of the YAML, and set database credentials to ensure connectivity.
You may set up an interval or time for automatic cleaning, to ensure the system stays organized, which removes the historical data for older events and completed activities from system, which are defined with parameters

For api endpoints, there is default setting `server_port: 5000`  You can tune for any custom usage and to accommodate your deployment needs, giving your app its own address, if multiple servers run together in your application environment

`task_max_retries` property allows you to set an number of maximum allowed tries, when running any job in a failure. This can tune your error-tolerance in different implementations or scenarios
 The scheduler uses the configured database for its storage. You should configure its location using parameters of db connection

You are free to tune your log configurations to ensure a more customizable output with the help of the settings in configuration, allowing different logging strategies

Environment variables can be set, such as the port name using env var ` TSS_PORT = 8000`. These values overwrite the default parameters and configurations in file 

If the database settings change after setup you should initialize again using script: ' python db_initialize.py'. which is located on root folder of the project. 

For advanced usage with distributed setups the queue size can be customized, to optimize performance when using different types of hardware and server setups

You may adjust timeouts with parameters such a max wait for tasks in queue before job runs or for various processes and background tasks in queue system using the parameters of YAML

The web ui allows the display configurations.  

##5 Project Structure
The TSSv5 project is organized as follows. This provides a structure guide and clear organization.

```
tSSv5/
 |-- src/                # Main application code
 |   |-- app.py          # The flask app initialization file
 |   |-- scheduler.py   # Handles the core Task queue operations.
 |   |-- models.py       # Handles all db models
 |   |-- utils.py      # Utility and helpers
 |   |-- views.py        # UI views with all of routes
 |   |-- templates/      # HTML template directory for rendering 
 |       |-- index.html
 |-- tests/            # Unit, integration and e2e tests
 |   |-- test_scheduler.py # test cases to verify tasks queue data integrity
 |   |-- test_views.py   # Testing UI
 |-- configs/         # Contains application-level config 
 |   |-- config.yaml   # application's config vars and values.
 |   |-- logging.yaml   # application logs format and destination settings
 |-- db_initilaize.py    # DB schema initialize, creates database tables.
 |-- run.py        # Run module, exposes API endpoints with cli interface and tasks tracking functionality.
 |-- requirements.txt    # list of package dependecies 
 |-- README.md
```
The `/src/` folder hosts python modules that provide the queue logic in an encapsulated and reusable manner and ties everything together to function properly and cohesively.
  `/test/` hosts python module test scripts using unittest to check if everything in the modules work according the specification

`/configs/` folder has application settings for tuning configurations to meet different scenarios

 The `README.md` provides comprehensive documentation and setup guidelines.



##6 Contributing
We welcome contributions to TSSv5! The community aims at contributing new features, resolving defects, enhancing test coverage. It ensures project growth. 

Please report any issues encountered via GitHub by creating a new issue in this project repo. Please give enough context to allow debugging of errors to improve the project
  

To submit a fix or enhancement to this codebase you should fork the `tSSv5/`, and work in your new branch and issue a pull request from it to project's original repository 

Adhere to the Python code style guides - `PEP8` as the base style for the coding guidelines - ensures project has consistent and easy readable standards and conventions 

Ensure to provide adequate documentation to enhance maintainability, by understanding all modules with sufficient details

Submit tests along side the new changes, and cover corner-cases with edge test examples - it makes your submissions easier for review

The team follows an agile process and aims for iterative improvement - all reviews must apply with clear explanations 



##7 License
This project is licensed under the MIT License.

You are granted usage rights for personal usage without the obligation of attribution 

Restricting the commercial and private use can be a concern for developers to keep intellectual copyright safe and prevent commercial reuse and reproduction
 The project's contributors are also required to execute license, ensuring they respect code and follow rules, so all parties comply



##8 Acknowledgments

This project draws on the knowledge of various sources that provided essential components and support during the design, the developing phases

The project leverages the Python ecosystem including tools for testing `unittest`, `pytest` for unit, integrations test coverage and the robust python package library 

We thank the active communities, forums that have offered helpful tips and resources during implementation

Special recognition given to frameworks and tools such as flask framework and the open library database that has contributed the base functionality. 

It benefits also form external code samples for various implementations to build an effective solution that serves as reference to the design and build of this solution 

Finally we are thankful of all of the open community contributions and the libraries that were incorporated as well



##9 System Architecture
TSSv5 has modular design for ease maintenance. Its built as microkernel system which can be customized to adapt new requirements with low code modifications 

Core of architecture relies on message-based communication where all task interactions rely via events in database queue system for intercomponent calls. Each components operates independent in its own domain, reducing coupling and dependencies and allows flexibility
    
Task scheduling component receives requests for scheduling tasks in an efficient format, storing task requests. 
 The workers listen events queue to execute scheduled job, using defined task logic for task handling. These worker process is configurable 

A central management web ui monitors task statuses. This visual tool shows queue stats to help manage task and monitor progress in a simplified fashion 
 

 The database layer ensures persistence, storing events in database and ensuring durability for all queue data and keeping track events history and progress in a scalable system and data store solution
  




##10 API Reference
TSSv5 primarily expose REST APIs and web based controller

Endpoint /submit:
  * Description: Create Task Queue Item and Schedule Execution 
  * Input Parameter {function: name , argument, }
  * output Status of submission in Json format - status 201. Failure is shown 400
* /status: Retrieve all the queue stats - all of the current states in JSON.

The system can invoke the custom API to execute the functions to run custom functions, schedule, queue or delete jobs in the application queue, supporting a high volume of events



##11 Testing
Running of test scripts is performed from command via:  python test/all_test.py.  These tests can confirm and provide feedback if modules run without issues

Test setup needs `virtual env set ` as it has to be executed from within it, or dependencies fail to download or import from module and tests fails as an effect.
Performance benchmarks for tasks is run with custom benchmarks for execution speed with load.
Test environments use the docker, which enables quick spin down to isolate environment to test without any conflicts

##12 Troubleshooting
Dependency conflict may rise when packages are in different and un compatible version with each others - check the installed packages version using `pip freeze`. Then downgrade the versions if any conflicts exist.
The system will show `Database initialization Error, can be resolved `by rerunning the initialisation file and confirming it completes

The queue will stop if any database fails due connectivity, which requires network to reestablished or connection reinitialized in configuration files 
 The web-application is not accessible because the application failed during deployment with an error such as port 5000 being occupied

Runtime exceptions during a custom task may occur due to logic issues. It will require review with logging information, or error messages and then resolve the errors accordingly

Log file shows errors during processing of tasks due configuration mistakes or environment problems that should resolved

Incorrect configurations of environment variable, may also lead to incorrect operation

For a more complex environment you need docker setup that enables easier and quick isolation.
   
##13 Performance and Optimization
Implement a connection pooling that ensures that a number of connection are kept active instead re establishing a DB connection every call to database
 The code utilizes caching to improve performance in data retrieval and handles repetitive computations, which reduces overhead for tasks processing
Concurrency can use it, using asynchronous execution of the queue jobs with python asyncio and threading

Database performance optimizations can include index tuning for the frequent query

Optimize image processing with hardware acceleration, which improves task speed and efficiency
 Profiling and monitoring should provide real time stats on execution time that allows identification bottlenecks and opportunities

For a larger environment using multi processors can speed the process and increase system performance
Use load test scenarios to check scalability with high task volumes - can help determine if there's need to scale or to add resources.
   
##14 Security Considerations
Input validation is a priority to ensure the incoming inputs meet security criteria
 Secrets and sensitive info are encrypted in storage using encryption libraries. The settings is configured using external file 

Apply all known updates in libraries with automated vulnerability checks using a tool that monitors the packages used by TSSv5 
  Ensure secure network connection to access TSSv5 using TLS encryption, especially if external APIs and endpoints

Use role-based os controls in web ui with authorization, restricting admin roles with fine controls for sensitive tasks and functions. 
Implement robust auditing, track actions performed with user authentication. Logs for review, and incident reactions,

The project needs a dedicated documentation to guide safe operation of the applications. This will improve safety practices for operations. 

##15 Roadmap
The future for TSSv5 aims at more modular extensions with the current core. This will include 

   Checklist
    [ ] Distributed workers with auto scalability - will enable new deployment architectures
    [ ] Task graph and chain dependencies
    [ ] Enhanced Web based workflow builder 
    [ ] Native API Integration and plugin capabilities to enhance system.
  
Version targets aim to improve stability, and integrations in a three-year horizon for continuous delivery

##16 FAQ

- I encounter "connection refused error." This may require rechecking of the DB credentials

  Solution check connection settings for correct values or the environment
   

 - Why do certain tests consistently fail despite successful local build: Ensure environment settings matches between development environments 

    Ensure test setup environment for proper setup 
 

- What's a good alternative solution:  If increased throughput is a high priority. Use a robust solutions that support more concurrent connections



##17 Citation
To appropriately cite the project for use please provide reference

``@misc{tSSv5,
  author = {your_github_name},
  title = {Task Scheduling Solution, v5},
  year = {2024},
  howpublished = {\url{https://github.com/your_github_name/your_repository_name}},
  note = {Accessed: January 30, 2024}
}``

Consult with academic guide of style on reference requirements and specifications, 

##18 Contact

Feel free to contribute and contact for any feedback

Reach the developers on: developeremail@sampledomain.net
For any issues report to  tSS_bugs@sampledomain.net or via https://github.com/sample-repository.

To get support and engage join the channel on https://communitysampleforum.net