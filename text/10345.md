# Simple Task Scheduler (STS) - A Python Task Execution Framework

##Description 

STS allows you to schedule and manage tasks efficiently, running them in a specified order at determined periods. Its core strength is its lightweight nature and ability to adapt to simple or sophisticated workflow scenarios. It' provides a clean and flexible framework for scheduling scripts, commands, or any callable function. The architecture uses a configuration file defining the tasks and their schedule in a clear, human friendly structure. STS provides basic logging features, to aid debug.

STS is intended for situations requiring automation of repetitive tasks such as database backup routines, system monitoring or scheduled script deployments. Its simple dependency setup allows ease of adoption on a number of platform environments without requiring large dependency overheads. The framework is designed to be extended, enabling custom scheduling and execution policies. Future development will consider more elaborate monitoring and reporting features.

The scheduler core utilizes a timer-based approach, periodically checking the task list against the system time.  Scheduled task definitions are loaded from a JSON configuration. The task execution is handled within a dedicated process, isolating scheduled operations from other application processes. Error reporting is basic, logging errors to a standard error location for debugging.

STS is written entirely in plain Python to ensure wide platform compatibility. While no database is required, the configuration files should be stored and protected to secure the scheduled processes. The scheduler core is relatively small, making integration into existing systems straightforward. Its modular structure allows for future enhancements, with the aim to expand functionality as needed by developers and users. The framework's focus is on stability and simplicity of use.

Currently, STS is primarily designed for single server or standalone machine use. Distributed schedulers or complex orchestration are outside the scope of STS's original goals. The project aims to be easily deployable using container technologies such as Docker, simplifying the deployment of scheduled workflows. It is an ideal solution where you need a simple way to ensure tasks run on a regular basis, but with minimal dependencies and overhead. STS is a starting point for automation.

## Installation Instructions

Firstly, you need to make sure you have a Python environment installed on your system. A recommended version is Python 3.7 or above, but most Python 3 versions should work fine and will be compatible. The STS core only uses built-in Python functions, so it requires no external C/C++ compilation. Python can be typically found in most Linux and Mac OS distributions. Windows users may consider using Python installed in conjunction with the Anaconda suite.

Next, you need to obtain the project code. You can either download a ZIP archive from the project's repository or you can clone the GitHub repository directly using `git`. Cloning is the preferred approach for tracking changes and contributing updates. You can clone the repo using:

```bash
git clone https://github.com/your-username/sts.git 
```

Once you have obtained the code, navigate into the STS project directory in your terminal or CLI environment:

```bash
   cd sts
```

After you've entered the repository you should see a `setup file`, usually called `setup.py `. You need to run this setup file to install STS and its dependencies: The setup file contains metadata about the project and the instructions for installing the Python packages. The recommended command for this is:

``` bash
     pip install .
```

The above command should install the STS core and all dependencies specified within the `setup.py`. On some systems, you might need root or administrator privileges for this command to execute correctly. Use `sudo pip install .` on Unix-like operating systems, but be careful when using `sudo pip`.

If you face any problems installing, it is often due to a pre-existing ` pip` installation. You should check the ` pip --version` to see your ` pip` version. An out-of-date ` pip` can often cause installation conflicts. You may need to first ` pip install --upgrade pip`. It will also update other package management tools to latest stable version

To test installation, run:

```bash
  sts --version
```
A successful run of this command confirms a properly functioning environment

After install is done the system environment path variable might require an update to include STS installation folder so that users can access commands without explicitly providing absolute location paths

Windows systems might show problems installing dependencies if `path` has not been correctly modified or configured after an environment installation, which could mean manually adding installation path as `python\script\bin` as the new environment

On Windows systems the installation path for python should include a location such as the `AppData\Local\ProgramInstall` which will enable `STS` execution without path configuration
On MacOS ` STS_INSTALLATION/bin`

It's recommended that Python installation includes automatic `python ` commands to be automatically added. If not, users have to use long ` /opt/Python-Installation` style instructions every-time

It will install any missing components such as dependencies and modules and ensure everything functions as anticipated.
This concludes STS system installation setup
The system is set

## Usage Instructions

To start scheduling tasks, first, you must define the scheduling configuration in the JSON file format and save the configurations file within the repository folder. This will be automatically read when you initiate the application and will contain details like the scheduled timings for the scripts you need to schedule as the configuration is loaded by application startup script, it must reside within the root

Example:
To create and launch a schedule for your scripts you should call STS by entering a call to STS, using the configuration as argument for example. You need to call a task file with an associated name for each scheduled tasks
The configuration will specify the tasks which you can add, remove, modify etc. to be managed in a flexible manner
For instance

```bash
   sts schedule.json
```

In `schedule.json` the file will specify each tasks with names associated such as 'DatabaseBackupScript': { 'schedule': '0 0 * * *', 'command':' /location/dbbackup/command --params '} ' and more parameters. The configuration needs be well specified with correct JSON and formatting for proper function
The `0 0 * * *`  schedule indicates the backup scripts should be launched daily in the middle of the night and you should configure that with your local environment time.

To run all task schedulers on an hourly cadence and report status on logs call this

```bash
   sts run-all schedule.json
```
You need create the appropriate configurations files that specify the action you intend
It can also read script and launch that as well. The application provides built-in functions

When using a task, specify its full path to make absolutely sure there's a direct execution path from folder or a script, as it doesn.t perform implicit discovery or search

In case a command returns a code other than `0` (successful exit), then that task would trigger failure logging, with the exit reason recorded as an entry to a logging directory for easy troubleshooting or monitoring for failure reasons in tasks running and the logging can contain time/location information too to easily debug. You also want ensure to test your command

## Configuration

STS heavily relies on configuration provided in a JSON file to determine what tasks to run and how often. A well formatted config JSON is critical to correct functionality of this program
The named tasks are the heart of your configurations which are scheduled tasks, that define when, and what needs running in terms of tasks

Here`s example for JSON configurations:

```json
[
  {
    "name": "DatabaseBackup",
    "schedule": "0 0 * * *",
    "command": "/opt/db-backup/backup.sh"
  },
  {
    "name": "SystemMonitor",
    "schedule": "*/10 * * * *",
    "command": "/opt/system-monitor/monitor.py"
  }
]
```

Within a config you have a name associated for easier tracking and description for a given task as it executes, and `schedule` field that specifies using the Cron notation, the execution frequency
It uses the system's Cron engine that will automatically parse all scheduled cron notation
It will run on time if cron syntax correct. It needs valid Cron commands to function appropriately, with error handling on syntax error. It also accepts the relative timestamp. A cron expression of every 10th minute is `*/10` to schedule every 10 minutes for task to start, for every one-day run it ` * * * *`, the cron is well established

There`s command which represents path and arguments needed and used by scheduler engine when task starts execution
There should exist command for the arguments you are intending on launching, for easy configuration, it is best practice is for each task, there exist dedicated scripts and configuration to ensure separation, it improves code organization
For environment variables STS supports loading from environment file as part of its config to manage security of passwords
This file must include key values and be in JSON as an array or dict to load. For example you may load a `env_keys ` as keys from this and then it loads environment variables as needed during executions from this config for the environment to work
STS uses environment as key variables during task start so it needs to configure it

Environment configuration also uses relative file system path as the location

STS is very customizable due to the nature of cron. The system also provides options such as relative scheduling

It is possible use scheduling for time zones

The configurations must have the `schedule `and also command field as mandatory, the rest will follow with optional features such as environment, path handling for logging as well etc

If environment variable loading is disabled or there are no `environment key values, there are no changes in task behavior`s during launch
It is also highly suggested that environment values have appropriate security policies and best secure coding standards applied when used as secrets and other keys for system tasks as a safeguard. It is critical
It is designed for simple task management
## Project Structure

```
sts/
 |-- sts.py          # Main scheduler script
 |-- config/         # Configuration files directory
 |   `- schedule.json # Example task scheduling config
 |-- logs/          # Where the STS logs goes to be created and tracked for error reporting purposes
 |-- tests/          # Contains various testing code and testing cases and modules for various tasks in scheduling, as a quality check
 |-- setup.py       # Package install definition to install python dependencies and install STS as an independent Python package for easy deployments across various operating system such platforms with easy package deployments to environments as easy package installation and configuration
```

`sts.py`: The core of the scheduling application.
`config/schedule.json`: Example file containing the scheduling configurations
`logs/`: This location holds logs of all executed tasks to assess error, failures etc during the scheduling process to improve monitoring or for debugs
`tests/`: Contains unit tests, to improve software testing of the project code as it grows and improves with time. Testing can easily identify problems
`setup.py`: Contains installation information, it contains all necessary required to install as python library or application with its packages, and also can define its metadata

`docs/` :  The repository can hold documentation in future

This simple organization provides clear division for core, configurations, test and package install

This allows ease maintenance of each section for individual features within the application, allowing modular code structure that is easily expandable. Each part contributes for ease maintainability

## Contributing

We welcome contributions to STS! It is intended to allow easy contribution and deployment and easy code management across platforms for all involved users,

Please create a new issue on the project repo and specify your request before you create the feature and ensure other developers are also working towards that, and that there is consensus.
You're welcome create and send your patch in pull requests but they require a thorough testing process
It needs to comply for the test to be accepted to pass through code

All commits and submissions made in `main` require unit test, documentation and testing for any major new functionality or features to avoid any code quality concerns or issues in existing functions
Ensure proper testing coverage during your submissions. Test must run without failing
Adherence with style-guide with formatting, docstring comments as required by code.

If the patch contains a bug or issue report, a fix should accompany the code

We will thoroughly vet your patch and make changes as we require it before approval and submission, for code to meet the project guidelines
The submission is reviewed to meet our project standards to ensure a good product to be provided. Thank you for contributions!

## License

STS is licensed under the MIT License. It allows for free usage of project under various licensing. The usage, modifications are all welcomed under its open usage, as the software license allows
The main purpose here to is promote usage to all and ensure it benefits developers, all contributors welcome and we do accept all changes that can benefit.

You are free to use, modify, and distribute the software under this license but any redistribution should maintain our notice
This helps in maintaining and acknowledging our efforts in this community

## Acknowledgments

This project would not have been possible without many dependencies. A few key ones that contributed include Python 3 as base programming platform to allow ease of development. The community support provided many of our core packages

Many open-source Python projects, in addition its documentation, also inspired us
Many community discussions helped with many ideas

A huge credit appreciations also to all developers for all contributions to this code as its a community driven project

We want to also credit our internal testing community and contributors in providing valuable and essential inputs

Many contributors made their code public to benefit and help all, so this has served as source to build STS upon its current form to allow for future functions to continue
Thanks you for being with STS project!

## System Architecture

STS adopts a relatively simple and modular architecture with key parts to ensure easy development to ensure stability in deployment

A main script is executed as part of launching. This is the core application script. This reads config JSON, schedules events. and monitors them, for error checking as the framework evolves

Tasks and their schedules can easily be defined through configurations files which is a simple file format for all tasks

Execution of all processes occurs in dedicated subprocess as it helps isolation to allow better monitoring

There also exists dedicated error-logger to capture logs of task and failures during launch. Error handling also has more advanced capabilities
All these features ensure ease and safety in scheduling and execution and allow a modular design which ensures ease deployment of the STS. This is also easily expandable in its nature as its intended design
It will continue growing

## API Reference

Currently, STS doesn `t come with a traditional API` in the sense of exposed endpoints but offers command line interface CLI as a means to configure launch STS tasks
For launching STS it can launch through

* `sts <config file path>` : Starts scheduling process uses provided configuration file and schedule tasks accordingly
* `sts run-all <config file path>` : runs each configured scheduled for the configuration in the specified location for easy launch of each and everything as scheduled to test all features in configurations and more features for easier usage in debugging purposes. All scheduled configurations

While not formally exposed it does support a limited range API

The code itself, can potentially exposed via python import
The `STS(configuration file)` can load and manage schedule. The class `TaskSchedule(sts)` can define schedule and execute the defined task as well in code with proper code import statements to ensure it is functional with proper configurations for each task for the system to use
All code has proper modular code design, APIs

## Testing

Testing within the system can done in several manners and the system includes many test functions and cases and modules, and you will find them located with a folder name such ` tests `. You must utilize a python package such pytest. A command that invokes it to perform test cases
For test run it needs

```bash
python -m pytest tests/
```

There can multiple unit testing tests, with testing of functions to verify the correctness of behavior and logic. Also integration is done

You should make test to pass, otherwise pull request should fail for acceptance to merge. It needs pass tests before approval
This ensures the highest-quality software with testing and verification

## Troubleshooting

One frequent issue is a syntax mistake with the JSON Configuration Files which will prevent STS launch with any success

Error Messages such are often found as `ValueError`. Double check all values in JSON files, it may have a typo

Another typical case can come when there exist an inaccessible script that will trigger execution to fail which means path to your files need verification, to confirm that they can all run with a smooth launch of the tasks,
Check that script and command have correct path, to ensure smooth and proper launches
Make a path verification before execution
Check permissions as well for scripts. The scripts needs permissions in launch environment or else there may occur failure
If errors are not clear and you don `t see adequate reporting from system, then consider setting the logging to verbose level, and it will log everything. It allows detailed error tracking to help debug issues in a system deployment

The most recent version might introduce conflicts and you will be need update the dependencies
Check all dependency installations and run again for smooth operations

Make the path of python and STS accessible as well for launch as it needs a system level added location to execute.
This provides an improved and robust STS environment!

## Performance and Optimization

For larger environments or higher volumes of scheduled task STS has few options and recommendations, that are applicable in a simple deployment for enhanced speed of performance for STS, as the scheduler can improve

For example, use cron expression as much efficiently possible, such cron can consume memory, especially with a larger scale
Ensure all the configurations files in JSON and that they all resolve to paths quickly
Ensure your environment paths resolve with quick lookups as slow file resolution will affect STS as scheduler

It may have some memory usage with the logging of the STS
If your logs become excessively large in file systems then implement rotating log strategy or other compression strategy, and reduce the file system size
For performance improvements and enhancements, it needs more work and optimization in various functions
This will be future considerations by our contributors and engineers as STS matures in functionality. The framework needs improvement. The community welcome all!

## Security Considerations

Always secure configurations with sensitive and secrets, it's recommended use encryption techniques

When you launch with deadlines be certain of proper error-tracking
For environments where STS needs sensitive info or keys ensure you do not put that data or security tokens inside source or code
Instead you can utilize external secure key vaults and load the configurations for security, and to protect your sensitive data as secrets
Ensure authentication when loading keys
Be vigilant to keep dependencies in latest release versions, as vulnerabilities and fixes will come to resolve any possible security flaws in your deployments
Ensure the logging of activities in your logs

You are welcome and welcome contribute

## Roadmap

Here a quick rundown what the immediate steps should to happen, the next release for version 2
Add enhanced error logging. Better logging will enable faster problem debugging as the application runs on systems and environments for troubleshooting faster for easier usage and better support and stability modes
Implement advanced features with environment management

Future versions will also focus in the enhancement

Next phase would add database and storage integration

We will be integrating a basic reporting feature
We also have to support different operating system

These phases need time to complete. It's community supported!

## FAQ (Frequently Asked Questions)

`How does schedule expression get parse`?:  The code uses built-in Cron Engine in systems so you should refer your environment system

How is configuration loading? STS will look to find the configurations, but needs absolute or local path
Why does execution of scheduled command return non zero? It indicates failure. Debug by viewing all error log for the reason as error logs show reasons. It needs to be checked and addressed!

Can `sts `run without admin privilege on my server
If it works correctly with permissions then ` STS `will work on your environments for deployments, it should not run into errors! If errors, double-check permissions to a directory path or a specific task that requires more admin. This is for enhanced deployments

It needs a stable and good testing to launch smoothly, please let developers contribute with test
It has been a great pleasure! Thanks you

## Citation

When mentioning in any publication:

Smith, John. Simple Task Scheduler. Github.com, 2024.  URL. [Insert your Github Repo Here]. BibTex.

## Contact

For inquiries and support contact support.

Emails at [email protected] to engage with a larger STS developer team for better feedback on features to be enhanced
We appreciate contributions as it improves the community feature
You may join in forums or channels

You welcome here!