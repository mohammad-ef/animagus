# Task Scheduling System - TSSv5 

## Project Title

##1  Description
The Task Scheduling System is a lightweight, extensible task queue designed for asynchronous job processing. It simplifies managing tasks across multiple worker processes with robust scheduling, retry mechanism, and progress tracking. The project addresses common challenges encountered in handling time-consuming or event triggering operations within an applications.

Designed as a modular system, TSSv5 enables easy customization of task serialization, storage and worker logic. It is written in Python to enable a fast and simple development. We aim for a production ready and easily deploy system that requires little maintenance after its initial setup and configuration. 

TSSv5 offers a web interface, enabling a user to visualize and manage the state of tasks within the queue, providing a simple dashboard to track the performance and health of the scheduling system. It provides insights into task completion rates, failures, and potential bottlenecks in the execution.

This system is especially useful in web applications that need to execute complex background operations, such as email sending, data processing, or image resizing. The asynchronous nature allows the main application threads to remain responsive and efficient while the scheduled jobs complete in the background.

With a robust architecture, TSSv5 offers a scalable and adaptable task scheduling framework suitable for both single-server setups and distributed environments, and can be extended using its flexible API for a range of specific uses.

 ##2  Installation Instructions
To setup TSSv5, you require a Python 3.8 or higher, and pip, the Python Package Index installer. It is highly recommended to install it within a venv virtual python environment to avoid potential compatibility issues with system installed libraries and packages.

Ensure you have Python 3 or higher installed on your system.  To verify installation, execute: `python --version `.  If the installation fails, visit python.org for installation instructions based on your OS.  

The first step is to create the python virtual environment. Navigate to the directory where you intend to install TSSv5. Run the following code to create a new venv environment, which is a directory with its own isolated python and dependencies installation: ``python3 -m virtualenv  venv``

Activate your new virtual environment using the command: ``source venv/bin/activate``  This step isolates the project dependency from your systems other applications.  You will see a prefix of (venv), which is a visual confirmation that the environment is activated.

Navigate to the base folder of the project. To install the required packages using pip, run the `pip installation` command, as shown below. This command installs the dependencies specified in the project's `requirements.txt`file which are used by the system.

  ``pip install -r requirements.txt``

The `requirements file` includes all of the dependencies required to run TSSv5, which can be automatically resolved using `pip`. This process may take a few minutes, based on your network speed and system specifications.

For database setup you need to run the following command: ` python db_initialize.py ` This command creates the database schema, and creates the default configurations.

On Linux, after successful installation and database configuration run `sudo systemctl start tss` to start the application as a service

To test your installations you may wish to install a tool such as postman, or `curl` and then try making calls against the system using our REST APIs (See: API Reference Section). This confirms basic functionailty has been achieved

 ##3  Usage Instructions
Once TSSv5 is running, you can add new tasks using our command line tools, REST APIs or Python libraries provided by the API module. To submit a basic task with `task create --name "Test Task" --command "python your_script.py"`, you must provide the `task name ` as well as the executable code which is expected to perform work

If submitting through REST APIs use `/task/submit`. A JSON format request such as ```JSON
    {
       \"name\":\"New test\",
       \"command\":\"bash script.sh \"
    } ```

The `tasks view` provides real time monitoring on the system with task id as its index and a description that details what task and its corresponding action

`tasks status {id}` allows us to find and get the task information. By passing the ID, we retrieve its progress state along with details such as task ID, name, creation and update dates and any messages it generated

The task status values will have `waiting, running, succeeded and failed`. If we wish to view and manage these status in an interface the `task ui` will present us with our system in action, with respect to each of these states. The dashboard shows each task state as well and its overall trend for system stability purposes

`task abort {id}` provides an easy mechanism for cancelling an action that can then allow other processes and tasks to run in their proper queue. If tasks get stalled then this is important functionality, and we recommend monitoring task status to make use of it if you notice tasks in states which should not persist for longer than a few minutes.

 ##4  Configuration
TSSv5 primarily relies on the `.env ` file for configuring various settings. The configuration includes, storage options like SQLite or PostGres(with appropriate credentials as per the environment variable set ups, database paths. Additionally it allows for worker counts to determine the degree of the processing parallelity that your environment may provide.

Ensure that the environment variables in `.env` is configured according to what database you would wish to setup with for your task system, which is important for persistence and task recovery if something unexpected occurred while a process ran, for persistence

If PostGres, it needs the appropriate environment configuration to ensure connectivity and credentials match to enable connection to a running Postgresql instance and allow our task queue management application access and write data as per defined database configurations in this configuration document.

TSSv5 can also configure the retry interval of tasks by adjusting the value for retry intervals within our configurations files as needed and depending on environment, the number of tasks we would want running parallel in workers

TSSv5 has a logging level option for determining whether to view only errors as the standard logging behaviour in this instance with more information to determine how we should debug our systems

Workers also can receive different configuration to adjust to what hardware the worker instance runs with to optimise resource management to make more efficient resource utilisation in a cluster setting or for a large volume processing instance for a given organisation

TSSv5's task execution can define timeout parameters, with a task's timeout configured by modifying environment parameters.

 ##5  Project Structure
The `tss/` folder contains all core application source code including API modules as well as task processing engine

`tss/configs/` provides various config related default configs as well customisation of parameters. 

`tss/data/` contains databases or related data persistence

``tests/` houses various unit testing examples as well integration scenarios which allow developers a baseline to follow to enable quality assurance to enable continuous deployment through a automated test framework and ensure that functionality behaves appropriately

`scripts/` holds scripts which provide database migration or data management

`utils/` houses reusable functions and supporting utilities.
   `README.md` serves as a general document for users. 
  
##6  Contributing
Contributions to TSSv5 are encouraged. We follow the conventional commits for pull requests and welcome bug fixes, enhancements, and documentation improvements. Before creating any contributions ensure they meet quality standard for a given task by reviewing existing testing examples as a template for writing new test examples 

Submit new feature or bug fix enhancements to us, as it helps ensure that they pass testing as it provides better code reviews with the current state, and helps the maintainers understand where they might want the contribution and direction the project may head in

If there is any issues encountered when attempting new changes ensure to submit them in bug tracking as this would improve development speed by enabling other users of TSSv5 to benefit by resolving the errors or improvements in functionality as part of community contribution effort 

To get involved in code review we would encourage submitting new test case, with code examples that allow for the contribution, so the project and the contributors may learn.  This ensures the contribution follows established coding conventions for future developers 

 ##7  License
TSSv5 is licensed under the MIT License.  

This license allows you to freely use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software. You can apply this license in almost all of its aspects and can freely apply without requiring payment or additional restrictions

Please be sure to keep and include the full notice within copies that include or adapt portions of the system and be aware the software is to be distributed as it comes.

 ##8  Acknowledgments
The developers acknowledge and appreciate the work done in existing project, and their support, which enables development and improvement of existing functionality within open standards 

The core libraries we use have contributed to making our systems more functional on various levels such as the python language itself with it being written as it's original purpose as intended, the open database standard of `postgresql` to maintain and manage persistent data. As well a lot of effort went into making this an easily adaptable OSS system for everyone in any organisation that promotes and embraces the power and potential within OSS

Finally to the various members of this open community who are contributing and testing TSSv5. Your effort ensures quality of service, which in turns allow others who are looking at TSSv5 for potential to make the jump with ease with assurance

 ##9  System Architecture
TSSv5 has been developed using Microkernel architectural principles, allowing different functionalities within development teams and external developers a degree of abstraction to focus within each individual modules with the overall goal that we create something scalable for a larger deployment.

We've adopted an `Actor` based concurrency framework to manage multiple processes within a shared system and manage resources as per need to provide maximum processing capability to allow our workers to fulfill a queue with speed without blocking one another

The main API endpoints and REST API calls translate directly with minimal latency with an event queue and an underlying `Redis cache` implementation so our task scheduling has near real time performance 

Each worker instance connects using long polling techniques with minimal resources allocated and only uses what its given as we allow workers on any available infrastructure with the same API implementation to manage a distributed processing capability in any system.  The `UI`, database interactions, worker processing engine have their separate components which allow independent development.

##10  API Reference
The system's main endpoints and REST interfaces provide access into the functionality. To access and view available APIs refer to our `OpenAPI definition document `

The main entry endpoints for API interaction include: `/task/submit,` perform an addition task into the schedule for action
 `/task/list`, displays tasks available with various states

`/task/cancel/{id},` Is available to perform a request of canceling task. This action must occur as quickly as possible
and must have minimal resource utilization for this API interaction with an action 

 `/task/query/{id}` retrieves information regarding that the status for an specific job on its progress 

Each action requires authentication to ensure no one outside an organization performs unauthorized activities with API keys provided by administrators and the security protocols are well enforced and tested as an integral part

##11  Testing
Tests have been built on an open source `Pytest `test suite. To begin with our automated suite use `pytest`. You may configure additional environment flags, which is recommended in an automation system to make sure we can reliably and consistently run all scenarios with ease to safe keep system and allow automated builds and deployments for our system, so you have all our testing available

To execute the unit tests run, the testing command as defined above `pytest `. It would iterate over various directories which contains the different unit test implementations. You must ensure to run this from top folder for testing suite, or else, tests won `t find and run. We follow conventional test case implementation which is ` test_[filename] with a test_[classname]_ test function. We have a comprehensive range which ensures a robust test case, and that all scenarios covered, for our developers for new implementations to build on top and maintain the system and ensure we can continuously deliver value without issues to end user as much as is technically able,

##12  Troubleshooting
Frequently reported issues encountered are database connection problems if Postgres isn`t properly installed. This usually arises from missing configuration settings, to solve it review .env variables for proper values. The most likely culprit are `database password/ user credentials`,

Common issue when attempting tasks and receiving `Timeouts.` The timeout values are not defined as they require proper tuning as part of deployment and testing with real scenarios for performance to make use of the environment available for our worker, or they have become overly restrictive, review configurations files to adjust timeouts, if you are experiencing similar

The API server sometimes has intermittent connectivity errors if the server isn`t setup for proper firewalling as this is common to see, or is not correctly exposed or properly set for inbound and outbound connectivity

When encountering the issue of worker nodes not picking up tasks on time check if it has a `network error.` Check that DNS configurations for resolution as it may require a network issue. This could involve internal firewalls

 ##13  Performance and Optimization
The primary means of achieving better optimization involves the proper scaling. This could involve horizontal worker nodes in the case our processing demands are large enough or require greater concurrency, to make best usage out of system, a horizontal deployment would enable greater utilization of processing capability

We make uses of asynchronous tasks as an intrinsic element that reduces the latency of API, the `cache implementation with` using in the queue allows our processing engines to avoid unnecessary data lookups as well as data redundancy, which ensures a streamlined operation of system in the back-end

Optimizing worker configurations allows you better tuning parameters based on your workload requirements for better resource allocations and management within available infrastructure resources as we provide flexibility in which allows it in our designs 

 ##14  Security Considerations
Input validations, such as data type validations and size validations for parameters must happen as an important layer, preventing vulnerabilities, like the potential cross site and data contamination attacks which is crucial as a defense layer in this application as we do with the API 

The sensitive data or environment configuration, secrets are not allowed inside codebase but instead are configured within our secure storage systems or as an `encryption mechanism`.  It is best practise is a way of preventing accidental data exposure and potential security vulnerabilities as part of this application deployment as the security team recommended it and as part of compliance

To stay on par of security and new vulnerability we would need a process that allows regular patches with dependency version tracking so to maintain a high quality service and be prepared

To mitigate risks from vulnerabilities or any errors in production it`s crucial we establish reporting channel with clearly stated procedures. To help users quickly submit any issues noticed.   As we would require a fast action from developers

 ##15  Roadmap
Future planned functionalities includes improved support in monitoring for worker and scheduling queues in terms of better metrics tracking, better dashboards for visualizing system

Adding a `webhook `support would enhance external event based integrations to provide greater degree for custom integrations in various applications as an external dependency for integrations as needed
Adding a distributed locking service allows to implement greater control and avoid conflicts between concurrent executions

A more flexible scheduling system to allow tasks be performed with very intricate dependencies to be more efficient in a distributed architecture

 ##16  FAQ (Frequently Asked Questions)
Why isn\`t ` my worker connecting`, if this has happen check connectivity from network firewalling as there might not have sufficient ports allowed or there`s internal DNS or routing struggles which are common, review config settings in environment variable as they have to have a match.

Why does task seem so late in `status,`. Ensure that task queues aren `t congested due network and/or server load issues that are occurring which might impact on performance and cause it`

Is the scheduling robust for failure cases? It supports robust failure scenarios.  Tasks may attempt several reprocesses based configuration to enable task processing and persistence of work done to ensure task integrity as per design to ensure that errors get mitigated in production
 WHY do task timeouts fail to `work.` Ensure there isn\`t a configuration with too tight a value to cause the failure as per requirements as per your application requirements
 WHY isn \t it ` scaling,`. Consider if we are reaching our concurrency levels with workers

 ##17  Citation
 If citing for publications use:  TSSv5, The MIT Task Scheduling Framework for Distributed Environments (version 5),  [Link to Git Repo/Project website](LinkPlaceholder)
   @software{TSSv5,
      author = {Author Names/ Organizations},
      title = {The MIT Task Scheduling Framework for Distributed Environments},
      version = {5},
      publisher = {Repository Host Name, e.g., GitHub},
      year = {Year of publication},
      url = {LinkPlaceholder}
   }
We strive that our project has the necessary citation to give back what was learned as well give deserved acknowledgment as well for the work to allow for others benefit 

 ##18  Contact
For support questions and/or any feedback contact via support.tssl.team@gmail.com  or our slack group [link] for faster communication with active community to help with various support requests
Report potential bugs to [link]. To request feature please visit and follow our roadmap to submit new enhancements, contributions or improvements as a feature enhancement
