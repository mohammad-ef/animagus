# StellarMapper - An Autonomous Celestial Mapping Platform 

## Description

Welcome to Stellar- Mapper - StellarMapper' is a distributed autonomous platform built for comprehensive star charting using an open- source approach. This system allows geographically disparate computing units to pool their observation resources, generating a far- more precise galactic cartographic product compared with traditional approaches. It is primarily designed with citizen sciences as its user group. The system is built as micro-servers that connect together to build one galactic map.

At their core we utilize the Bayesian approach for mapping, taking a probabilistic view into celestial bodies to build our maps from observations. The core architecture leverages message queues (Kafka), allowing asynchronous operation to increase reliability, throughput and fault tolerance to failures within individual processing machines within each distributed node in a system network of these micro-servers. This ensures a high resilience against individual system outages during operation.

Data processing occurs using parallel algorithms written mostly with the Go language for optimal performance, allowing a massive data throughput and minimizing resource demands.  The output is generated and stored on the distributed nodes in Geo-Spatial format which facilitates seamless importability into a host of GIS (and other) platforms for downstream usage.

Our main goals include building an extremely detailed galactic map for citizen scientists to use and providing an extensible API and data format for further development by interested parties; we welcome collaboration to extend these core goals. Finally, this framework enables real time updates for the galactic maps and is intended toward continuous improvement and discovery. We are using open source libraries and frameworks wherever available in this system.

Finally we provide a user friendly command- line interface and a REST endpoint API which facilitates data upload and query, making the process of data collection from users easier to use and extendable by other applications. This design makes data accessible and useful to a range of applications including research institutions.

## Installation Instructions

This is the first step toward getting our platform online - you must be a Go user (version >=17 required to build the platform). We recommend building on Linux as most tooling has been designed toward that environment (mac is supported too, although may require manual patching in dependencies in specific configurations). Building for Windows is possible through using WSL2 or other emulation software to build for cross- platform deployment, although it isn't a natively tested setup path.

You will require a Go compiler installed as well and a package management system for downloading required libraries. This includes git for cloning our repository to get your copy for installation of Stellarmapper.  You can find installation details for Go online depending upon your environment - https:// go.dev/doc/install (for instance.) Ensure it appears properly within a command- prompt (ie. go version ).

Next is obtaining our repository from git - you will need git installed too. This should be readily installable from most operating sytems (usually by typing apt/ dnf/yum/ brew commands). The command to retrieve the codebase to get started is `gitclone <git url of this codebase>` to the desired local location on any host computer you are using. 

Then we will install all the dependencies of our project by simply running `go mod tidy`. If for whatever reason you get error relating dependency, it might suggest some libraries were not found or some other configuration errors on the machine you' re operating - in such cases, please consult documentation for your OS regarding package installation to fix such errors.

For Kafka, we require a working instance to operate and we expect version >= v3 - https:// kafka. apachie. org/download to download and build from source - please review their instructions on their documentation page on how they should get built.  The system will use default configurations if not otherwise overridden in `config. yaml ` (described in configuration later).

You also might optionally choose a postgresql database for storing the mapping metadata as a backend, if desired; we recommend version 13 or greater (but it's likely to perform correctly across more newer version releases also). You can find installation details for postgers online - it will allow you to easily query for map metadata from the StellarMapper platform as you scale.  The default config will use a file-based database for simpler deployments.  

After all of them are installed and configured (including the database or message queue, if desired, or otherwise the default settings work), run `make build` on the root folder for the codebase to build our executable binaries for deployment. You will find the resulting executables in `./build folder`.  

Finally you may optionally deploy the resulting build folder binaries to Docker and run in Docker container. Docker and Docker Composer can provide an easier means for deployment on cloud or on a local server to run the project.  See Docker instructions and documentation within each directory folder inside Stellarmapper. The Dockerfile should have all necessary build instructions to build StellarMapper from source for container usage.

## Installation Notes

Before attempting to execute any of this install procedure you should ensure you' re using a clean system with a working internet connection - Stellar Mapper is a large project, so downloading all packages will require bandwidth availability from the network interface of your machine for downloading all dependencies of the packages from various external websites for building from source.

The Go environment may also be a cause in some cases for build or installation related error. Please consider to set your `GOPATH` environment to be set before building any projects that use it (this includes StellarMapper as it leverages some external tools to do the building process)

If your platform has security policies enabled - make sure the necessary packages needed for our installation (including Kafka, PostGres (if applicable to install)) have been whitelisted.  These may be required for building from sources which is required in this process

For Docker users make sure there are no pre-existing container images from our project. This might create errors while creating images and running the containers as a result. Remove existing image before building a new one, if needed. 

## Installation - Additional Notes

The build folder should contain the core executable for running StellarMapper.  You may also find other utility binaries used for testing. If not, please re-review previous instructions for building to fix any issues in build process.  

You should ensure the executable in the `build directory` can access external resources (e .g internet connection and Kafka) before deploying this to any environment for actual deployment and operation, so you must also check all firewall policies.

## Installation - MacOS Considerations

On Macs please make a note that you may experience problems downloading certain build dependencies that require some additional tooling to be built - in particular you must have Xcode and its command line tool chain installed for building packages correctly on MacOS. You can find instructions for installation online for Xcode.

 ## Usage Instructions
To initiate your first StellarMapper session, please use the command- line application, accessible with `./build/main` in your terminal, where `build folder `is assumed to be the build directory created when installing the Stellarmapper code from our github repository (as instructed in above installation step). 

Once launched the program starts with a command to upload the first observation data from users, so you can begin to populate a map by simply providing data in `geojson format`. For instance if one user observed and recorded an object at (RA: 6 hours, Dec:-30 degrees), then this information would have been saved locally into `geojson format` with associated timestamp and metadata to allow us to build our data structures correctly, so a simple file upload to a server with `data. geojso format `.

To query for the map data we support a rest endpoint `/maps`. If you provide specific search terms it will query the available galactic data. If nothing specified it just returns the overall galactic maps for a specific date range (as recorded within metadata from users) to allow visualization of galactic map evolution over time and location to allow further analysis of the map as it evolves.

The command- line interface accepts arguments, allowing for various options such as uploading local data sets and configuring connection to different Kafka clusters or databases (if configured). To see a full list use `./build/main - help`. We encourage experimentation with command-line tools as it is an excellent approach with building your understanding of what our software does

## Usage Instructions Advanced

To run in parallel you can use the `--num Workers` which enables you to define how may parallel worker processes the StellarMapper platform will utilize to do parallel operations and improve data processing speed - this will scale the performance of this mapping application as more resources are given to processing tasks.  The `--kafka Brokers` allows to point to an alternate Kafka brokers.  The `--postgress URI` can specify an external postgresql database for long-term data metadata to save.

You can configure how to filter and aggregate map data by setting the `--aggregation Method`. For example, if you use `b average` for averaging the coordinates of observed points, it will build a map of galactic positions by simply averaging the locations of observations for each region (defined by a spatial partition) of the sky and then building map data from the average.  

The API can be extended using our open design for additional functionality. The system will allow a user or developer to extend the functionality to create new map projections and coordinate transforms by creating plugin components and uploading to an API.  The system supports a pluggable design to add more features and map projections.

 ## Usage Notes
When querying our APIs we require you to send the `Content- Type header = applicatoin/ json`, and our APIs return responses using same data formats - so ensure you' re setting these appropriately.  

The API will also enforce request limits to protect the servers. Please check our documentation or send support request for more info. Please use the REST APIs responsibly and avoid hammering the servers with requests and follow best practices for rate limits and request size restrictions, when using. If you are experiencing problems using the REST endpoint API you should review the documentation.

## Configuration

The project relies upon the YAML file named `configs/config. yaml `to store configuration parameters that influence operation of this software project. The `configs folder `is the main repository for the YAML file for all configuration parameters to run this software project. If you' ll be changing any settings of the StellarMapper project, ensure these are configured within ` config. yaml `.
This is the first step to configuring our software to run and deploy in a custom envionr ment

We also expose various config settings through environment variables that take pre-cedence. If you set `KAF KA BROKERS`, the system will utilize environment variables instead of yaml configuration files and will override the configuration specified within `configs/config. yalm `. 

Within this `yaml config file ` you can configure several settings including data aggregation settings to build our maps with our system to control how to handle and display data to build our maps from our citizen scientists to allow us to build high-accuracy maps from distributed resources. This enables fine tuning for various environments that might exist.  

You can configure data source locations, database settings, Kafka brokers, authentication keys, and API endpoints. Each setting comes with descriptions for what each one is used for and potential value ranges in our yaml file configuration - ensure that you check the comments on the ` yaml files `.

## Configuration - Environment Variables

The system accepts various environment variable settings for customizing the behavior of the application and overriding settings specified in `configs/config. YAML file ` - this approach is more appropriate to production environment as they are typically deployed in cloud and can be configured via the platform that hosts these. 

Some notable settings that support are `K AFKA BORKERS` to allow to define custom location for kafka instance to connect and `POSTGRES U RI to specify a postgres database for the backend data store. There are additional settings for configuring API endpoints, authentication keys, logging levels, and more within our documentation. 

## Configuration - Advanced

For security purposes you can configure secret management using environment variables - this allows us to not store sensitive credentials directly into the configuration files that we can store into source control - please review how this approach should be setup for the project. 

To optimize system performance you can configure caching strategies to allow us to avoid re processing the already- cached results and improve overall response time - the system should provide better response performance and reduce resource usage overall

You should consult our API documentation for a complete list and description on each parameter setting that we allow to tune our StellarMapper.  The `docs folder `/contains a document describing available API settings to customize our platform as a citizen scientist.

## Proej ct Structure
The project structure reflects an organized micro-services design for scalability and modularity. 

 `/ src/` directory: Houses the primary codebase with all our core algorithms written mostly with our GO code for efficient data processing for our galactic mappings project. 

`/ build/`: Contains the executables for production deployment for running StellarMapper on a deployment. You need to execute `./ build/main `/after the project compiles successfully

`/configs/` stores various configurations to run project. `configs. yaml ` file contains most of them, which includes database and kafka settings for the overall configuration and parameters to allow fine tunign the StellarMapper behavior on any host machine.

`/docs/`: Stores project and system design specifications, as well as REST APIs documentation, to help developers extend features in an easier format - we also include our roadmap here 

`/ tests/`: contains unit and integrations testing code base for comprehensive quality assessment on each feature and functionality - these are used to guarantee high quality software as citizen contributions are introduced

`/examples/`: includes a series of scripts with simple example usages on StellarMapper' s API endpoint calls that are available.
 ## Contributing

 We appreciate contributions! Before diving in please check that the existing pull request has not already been requested and review guidelines to follow for code consistency

 Report new issues or suggest new features within github repo under our Issues. Provide descriptive titles that accurately capture your problems so that it will assist with the team' s ability to diagnose quickly, with all relevant context

 Please fork our git repo to create a new repo, create your working feature within fork to then open Pull Request on Stellar Mapper github repository with your changes, ensuring tests are all successful before opening. Please include test coverage in each PR as a condition to merge code and improve quality as citizen contributions increase.

We use golang standards. Make sure our style, formatting requirements and test coverage expectations for code.  It's essential to follow the same conventions in existing projects to maintain consistent and easy to maintainable project codebase as our project evolves. We welcome new features from contributors.   The test folder can serve to assist to follow code style conventions

## License

StellarMapper is licensed under the MIT License - the permissive and widely- recognized licenses allowing you and contributors to build upon our software to innovate further - we welcome such contributions from others and are glad to work towards a better mapping future from all our community of scientists and citizens

Please review license documentation from the project - the MIT licenses grant extensive rights to the usage with limited obligations as far as the original copyright trademark of code - this helps foster an atmosphere of open contribution

## Acknowledgments

 We are extremely thankful and recognize contributors to our core development teams, as our open sourced approach is dependent on the collective intelligence - this allows Stellar Mapper community members and scientists from diverse disciplines.   Many contributors assisted our initial setup on building data storage for metadata using Postgres

We thank for our initial contributions in leveraging libraries, such as Go's geospatial packages as our project foundation and we also would like to recognize all those within Go open community that provide a rich ecosystem

## System Architecture
Our project utilizes micro- service based modular architectures, for scalability with Kafka, for asynchronous data exchange to handle a massive influx of information and a scalable data persistence to manage our growing galaxy.

Observations come from distributed clients that publish their findings via message- brokers. Kafka handles data exchange, so our data processing service asynchronously reads messages to extract information details to map them inside an aggregate function

 The `Map Builder micro service` receives intermediate mapped results from workers that build high resolutions galactic cartographics from various observation sources using algorithms that allow fine grain control

 Data stored using persistent store using PostgreSQL to allow for efficient access of metadata. RESTful services provides the user and system facing interfaces with endpoints to interact for queries to retrieve mapped galaxy results to provide insights.

## API Reference

We expose a set of RESTful APIs allowing clients, other developers, scientists and citizens for access into mapping data and upload observational reports and findings from their instruments or analytical tools that will help build better and accurate mapping

`/ maps ` is the main route and provides query to galactic mapping. This will provide access in different data and coordinate transformation

  The POST `map / submit `allows to push a report with geojsonto provide observations, and will update and rebuild maps accordingly

`/health `/ returns server and cluster functional and healthy to assist system operations in determining healthiness and allow automatic scaling of services.   You're also free to develop a client library and contribute as we continuously enhance

##Testing

Unit test and functional test are essential components of ensuring a solid software build, we expect all contributors will write code tests to accompany any contribution - it should ensure quality

 We have built an integrations suite, running through various components and external services for quality validation. You are requested that any new module will require new test modules alongside for testing the code, with coverage goals for code to improve confidence of build. 

Run unit and integrate tests for Stellar Mapper with:

`go test ./tests`.  
The command will test various tests by using our builded tools, including the integration to our Kafka message and PostgreSQL data sources as a means to guarantee the build and operation.

## Troubleshooting

 If encountering issues please double check configuration YAML and ensure environment values are appropriately setup as described - this usually solves many initial configuration or build issues, please verify the Kafka service can receive connections - ensure there aren 
No Firewall settings, or any network blocks,

Common Kafka related exceptions, include broker unreachable errors from connectivity - double- check network and connectivity. Database settings should include proper URI for postgres or proper file settings, please consult database setup documentation

When uploading the API, errors could include missing required fields, such that a proper format is followed, please review your payload

## Performance and Optimization

For enhanced scalability and efficient usage in production we utilize data structures for efficient storage and algorithms designed for efficient computations and reduced data redundancy 

For faster response and to prevent data repetition in data, data is partitioned using Geo partitions based to optimize the query performance - allowing rapid data retrieval so we can serve our community.   Consider to cache commonly accessed map sections

The Kafka setup should provide parallelization of more workers - to scale out as need to process large number observations - and ensure our microservers and workers operate in an optimal configuration for scaling

## Security Considerations

Protect sensitive configuration such as passwords in YAML files - do NOT hardcode. Store these within environmental secrets to allow proper access restriction

Validate and Sanitize any incoming input, so there are malicious payload - to reduce attack risks on systems that allow external connections for users to upload observations 

Keep StellarMapper and underlying packages up to date for the lastest fixes in the packages as they get patched by developers of underlying components

## Roadmap

 We'll add features to expand mapping functionality in future versions, and allow citizen science participation - and enhance accuracy of our maps

Future enhancements may be include better support of various data input data from telescopes

 We intend towards expanding data aggregation to provide live- tracking and visualization capabilities to enable near real-time tracking

## FAQ (Frequently Asked Questions)

How should the file uploaded for geo json formats be uploaded? Ensure to have valid format.  GeoJSON must be validated against the proper geo-format standards for processing. The system does perform a check of incoming geo json to validate the formats before ingesting, otherwise upload would not go successful

How is Stellar Mapper different from all existing galaxy projects, or mapping projects available on web? - it's an opensourced, and designed by the communities. This enables a collective to build the data - a unique approach for citizen sciences to collaborate

Is our data stored safely with respect with respect personal data privacy. Data collected from citizens is stored only for map creation only for mapping - no PII (Personally identifiable information ) are stored to preserve anonymity 

## Citation

To correctly cite Stellar Mapper use this in standard formats

**BibTeX**
```bibtex
 @misc{stellarmapper,
   author = {The StellarMapper Team},
   title = {StellarMapper: An Autonomous Celestial Mapping Platform},
   year = {2024},
   howpublished = {\url{https://github.com/YourRepositoryURL}},
 }
 ```

  The open design allows easy integration into various academic research to facilitate collaborative discovery and enhance scientific advancements and insights on astronomy. Proper citations ensure credit and acknowledge this work, and promote open access science
 
## Contact

For any assistance on this project you should use issues on repo to report issues, and to provide features. The Github link will contain a channel or link.
We have active online communication to allow you contribute. 

If your question involves the data privacy - please submit your inquiry using an alternative contact information - this will route towards privacy and compliance.