# SmartHomeManager -- Automated Residential Systems Controller 2.0

## Description
This project aims to build a centralized, configurable smart device management and orchestration platform designed especially as a central nervous system to control all smart devices in your residential dwelling with enhanced safety. It facilitates the easy addition and remote access and controls of connected lights to heating and home appliances via a single user dashboard and command-line interface. SmartHomeManager allows for scheduled events with a modular, rule driven logic.

It addresses the increasing complexity arising due to fragmented control methods across multiple manufacturers and protocols used to control IoT devices. By standardizing device interactions and providing a simplified automation layer, it enables seamless device control and advanced rule-based home automation without significant programming effort or prior IT knowledge. Its open architecture facilitates extensibility, allowing for the incorporation of future devices/protocols with ease.

The project adopts event-driven programming and utilizes MQTT for real-time communication, allowing rapid response to changes or external triggers within the household. We are using Node js for backend development with Typescript and React for building an interactive and responsive frontend dashboard that allows for intuitive management of all smart devices as well configuration rules. 

SmartHomeManager is designed for scalability and resilience. The backend is architectued to easily run across multiple instances and the database stores the state of your smart devices for reliable device state persistence.  The modular structure allows developers and users, to quickly implement new features with minimal overhead or disruption.

This is an evolution and upgrade of an older platform that addressed a more narrow use cases. We are expanding to more devices and introducing more advanced configuration and security capabilities for better safety and reliability in your smart home. The project is intended primarily for hobbyist developers and users that like control of thir systems and are comfortable with some basic tech know-how for setup.

 ## Install Instructions
 Before commencing you should verify the following requirements on you machine, as well as install all tools as specified.

 You' will require a machine or server which can handle Docker workloads. Docker version 19.0 or greater needs installing on any system to build this application.

 You will additionally require `node` with version 16.14.  You may want to check the versions with the below commands to see what versions installed.
  ```shell 1-10
node -v  
docker -v
```
Next install the required dependencies using `npm`
```shell 1-10
npm install
```
Now you'll want the build to generate a production image.

```shell 1-10
docker build -t smart-home-manager .
```
Finally run your docker image using the following command

  ```shell 1-10
docker run -dp 3000:3000 smart-home-manager
```

  You may have problems running docker containers with limited access so you can check this via your user's Docker config or via system configurations depending on the environment such as macOS and/or Ubuntu Linux distributions.



  It is highly recommended to have sufficient storage for logs on your device so they can assist for debugging if errors or warnings arise during execution. 
 
  Note, you'll require internet connection in the first launch and every update, since packages may be downloading in runtime, if a package manager issues an authentication or connectivity prompt. This should clear once it connects and finds what is missing and downloads them as necessary.
 
 You'll see some log entries and output during this time as your smart home application comes up in memory for runtime operations to proceed to your front end interface for user interface access.



 The first startup could take around several minutes or even much longer due to downloading the initial set of resources needed to launch and serve to clients for interactioins as it is loading dependencies from external package sources, please be patient as the server prepares to receive connections, it will then log a successful completion when available and operational to accept clients for connections as the service stabilizes after initial launch,

  It is possible to deploy and install via alternative methods as this README describes one possible setup to ensure that all dependencies are met and configured as expected to properly execute.



 We provide several configuration parameters which will attempt to be populated with defaults, if no specific environment is found for initialization of parameters as defined by system environment parameters during initial run and initialization.




 If there is insufficient space you may need to allocate more space. If a permission denial issue is observed on docker it might involve running with sudo or other permission management for your current account in operation for proper permissions, 
 
 ## Usage Instructions
 Launch the SmartHomeManager interface with docker. Once you run it on your system via `docker run`, access through web UI at your host port 3000 via URL `http://localhost:3000`. It is expected for an error log to display at startup, so that it may resolve if you see connection and or configuration parameter failures or issues.

 Through this dashboard users are provided access via web browser UI which allows to manage existing devices and add or edit device details for configurations of rules and scheduled automation for various actions that may be triggered based on a series of parameters that are evaluated as configured via webUI to initiate device state change for various connected appliances in your house as part of SmartHomeManagement operations for control via this centralized application to automate device controls and interactions with minimal or little manual interference for ease of automation. 

 You may trigger rules through the web browser, as they trigger actions for a specific devices that can automate appliance behavior and provide a more convenient user experience by automating common interactions across different devices as specified through configurations and device assignments via rule definition, and then triggered when parameters are matched as configured to activate. 

 Advanced functionality allows developers access a set of REST api for managing configurations in automated and programmatic methods to provide enhanced automation via API integration, such as for scripting or remote system and control operations and automation as part of the system. The webUI can trigger a rule, so for example if you open up you're home you can trigger an automation routine of actions like opening all window coverings, diming down interior lights as configured via your rules, etc

 From CLI command lines you are also granted commands to trigger various automated processes to execute specific operations as needed.

   There will often be logs displayed in web terminal or on command-line to reflect system and automation operations that trigger various states of connected appliance.




 It supports the various standard IoT and Home appliance protocol to manage the devices in this ecosystem and is easily customizable by adding additional support through extensions for more appliances,

  If your system does not display the interface and instead throws an error you will be provided instructions alongside for further troubleshooting of issues and configuration errors. 

   The dashboard displays device state information, including status indicators like "On/Off", or current levels.  
 
   To control the connected light you need a valid configuration with all relevant attributes configured and saved as a rule or as configured.  

   The application offers an interface, as well an underlying API for developers or for more advance integration with external programs via API integrations for additional automated operations as required,




   There is support through MQTT broker to allow you publish custom data as necessary from outside devices or to publish device control instructions as part of integration into a bigger home management system, for custom automation and integrations to control all home components together via unified SmartHome Management operations to achieve your goal,
 
## Configuration
 The SmartHomeManager utilizes `config.yml` as the principal file defining device, rules, schedule settings in addition with external system configuration and parameter definitions and environment configurations, it also relies on external database for data persistance as it manages the configuration and states of various connected Devices for stability, so changes and settings should also update accordingly for persistent operations

 To set a particular environment variable use docker and the -e switch for defining a custom configurations as part of environment configurations as specified when starting docker and running container instances and processes on different environments.

   The configuration is stored in database with persistence, you need an admin access and permissions granted through user accounts, you can change device and rule details, schedule events, configure device behaviors with parameters defined via UI to fully customize the automated behaviors and appliance controls.   

 Environment Variables `SMART_HOME_DB` enables a connection through custom configuration of database access with username and database connection parameters for connecting to an established external system as well authentication, authorization parameters with credentials, 
  Configuration file format YAML. You'll find example format to provide for configurations with parameters as defined within. It is recommended not edit config.yml in-place to avoid issues when rolling upgrades as configurations could have a potential mismatch as part of updates, instead use UI as provided and/or command interface

 Optional device specific properties for different appliance type such as dimmer settings on a lighting, or heating temperatures can configured via properties on device configurations and settings within rules definitions and scheduled automations.



   There are multiple security parameters you will have the capability to change as well. For user authorization to restrict specific users from changing configuration values.   



 We will soon add more configurations such external device API and external systems to integrate as part of an extensible platform,



 We use the environment for enabling various parameters, so that users don need edit configuration files and encounter configuration inconsistencies when rolling upgrades or performing automated configuration changes for ease and convenience and flexibility for scaling and automation and configuration changes, 
 
 To add custom rule logic you may create new rules with specific triggers and associated devices that execute based on configured logic in YAML or using custom scripts that integrate in system

 ## Project Structure
   `src/`: Contains all primary backend codebase with device integrations with rule logic, configurations for system integrations via steering components for automated home operations for managing various devices.
   `public/`: Holds static files needed by frontend dashboard for serving user UI and configurations via javascript and other resources needed to provide a dynamic frontend interface for user experience interactions and dashboard controls and management as necessary via browser interactions for user interfaces to provide automated and interactive user interfaces via web browsing and controls on dashboard for device automations to manage connected appliance

  `test/`: Unit tests to check the core components, rules for automation, integration logic.

   `configs/`: Contains YAML file with rules configuration for device control as defined by YAML and rules logic.
   `dockerfile`: Configuration and setup for packaging for deployments for Docker.

   `package.json`: Node package and versions dependencies, as a standard dependency management file to define packages and libraries needed

    `smart-home-manager/`: Root directory where everything lies.

  There also exists some configuration file as YAML with various resources. These define device integrations or configuration options

 ## Contributing
 Please raise your voice via the Issues page in github. If you've a fix feel free to create pull requests.  Please provide a comprehensive tests to cover central features for quality

 Before contributing please review contribution guides

 Follow code styles guidelines for consistency
 Please make code as easy to be read.
  We have unit tests as automated test and continuous integrations

 Report bug fixes by providing minimal reproduction example as needed to help identify causes

  Ensure to follow testing requirements 
 Contribute tests and maintain high levels of quality code
  Please keep your PR's small to keep coordination with maintainers easy as a community for collaborative improvements to this open sourced system as possible

   All PR contributions and bug reports require a code quality review,

   Ensure proper tests coverage using automated testing and automated testing suites
   Follow existing documentation for code styles guidelines, to promote consistency

## License
SmartHomeManager is licensed under the **MIT License**.  By using and/or modifying this software, you agree to be bound by the terms and conditions of the License. It gives your usage of source codes, with no restrictions or guarantees. Please see `LICENSE` in the project repo. It's a quite generous and flexible permission license to enable users and open contributors freedom, 

The project aims at promoting community-wide innovation by offering freedom and open contributions without restrictions.

## Acknowledgments
The development relies upon various third-party libraries such as Node.js for building core functionalities for event and connections with external components as necessary

 Thank you to everyone involved with the `express` module that allows the simplification on building backend API interfaces for this platform

 Thanks goes to `mongoose` package as used on this project as an efficient object modeling system as well database interface and abstraction that facilitates development and persistence and interactions as a standard interface and for data abstraction from databases with various configurations for flexibility on integrations.

 This work is influenced by concepts around the Home Assistant project to achieve centralized automation for all appliance.

   Special acknowledgment of all contributing developers and testers involved to help with improving this platform

 The team appreciates support on open sources and all related tools that made developing this possible

 Thanks for contributors our Github, and all open contributors for their feedback

 ## System Architecture
The platform follows microservice architectural pattern with event processing and modular rule evaluation. Node backend server serves API endpoint to the dashboard to handle incoming device and user interaction and configuration changes

 We have an integration layers where different home appliance are connected with standard and common protocol and APIs

 The core of system resides on the rule evaluation layer as this logic processes various rules for appliance interactions. 
MQTT server acts like a bus and central event bus for all communication to trigger events between connected appliance. We've used database as persister to save appliance data as it persists data as it maintains device configuration settings for stability
 
 REST endpoints allow for API integrations from different external services.



## API Reference
  /devices `GET`:  List Devices `POST`: Create new Device `PUT`: update Device information. The body is `deviceID`.



  /rules `GET`:  Get existing list Rules and automation,`POST`: Add rule configuration and triggers as specified for automated actions

 `/api/auth`: handles authentication as part login/registration for secure management for restricted operations

 The system also allows access using API calls to manage all configurations with proper authorization

## Testing
 To initiate tests you should be running all automated integration test with automated suites

 Use command `npm test` for executing all test suite with various integrations as configured and defined to validate functionality 

 We encourage developers submit tests to improve quality

 We support continuous intergrations

## Troubleshooting
Ensure docker containers and port mappings configured correctly, especially for networking

If your dashboard does not render check your frontend resources loading in a browser, inspect error message in browser to check what resources not found for frontend components or modules 

 Check database configurations properly configured in YAML, and ensure the proper database available with valid connection details
   Ensure to verify environment configuration variables

 For any connection issue you must ensure your internet connections stable.  

## Performance and Optimization
 We are actively using efficient query and optimized code so that operations can occur quickly

 Implement asynchronous code execution so multiple devices and appliance states quickly and effectively 

 Consider cache commonly read configurations and states, especially on appliance and device status to avoid slow performance on frequent requests.
  Optimize API routes with minimal data as required and reduce network overhead
 Implement monitoring for tracking key statistics such resource consumption or memory allocation.




## Security Considerations
 Implement proper role and permissions on different configurations

 Securely validate all incoming external inputs as it may expose vulnerability
  Regular updates to keep software secure to protect againt any exploits 
 Ensure database and sensitive settings encrypted to keep it hidden to potential attackers and vulnerabilities as possible
 Secure API with access keys, as proper authorization with authentication as it protects your configurations,

## Roadmap
  - Device discovery. Auto detection devices in your homes.
  - Enhanced support more IoT platforms for better compatibility.
 - Integrate Voice Assistant
   - Multi home Support with remote control of other houses with separate connections

 - Enhanced rules logic, for example conditional events based of sensor information
## FAQ (Frequently Asked Questions)
 Q: What ports needs configured for docker
A: Ports are required and are configured for frontend web server

Q: Is this platform stable. 
A: The code has a number of built in features for safety as possible with proper error checking for all interactions for stable system and professional development and integration
Q How should I contribute with the code 
A We provide github with a community that is welcoming, and encourages all developers with their skills, so we encourage all open contribution.



## Citation
```bibtex
@software{smartHomeManager,
  author = {The SmartHomeManager Team},
  title = {SmartHomeManager: Automated Residential Systems Controller 2.0},
  year = {2024},
  url = {https://github.com/your-username/smart-home-manager}
}
```
When properly acknowledging you may add SmartHomeManager as source for all automated appliance systems. Please reference the project in appropriate citations as source for open code contributions and community events
Please ensure all published papers properly references the source to maintain community contribution to promote collaboration. 



## Contact
Reach our developers via github, and issues as it will facilitate community support and communication as a collective of developers working toward common open source automation as we strive toward the goals of a more connected smart environment. Please contact our developer teams to report errors or bugs with this product, we encourage collaboration with the developers
