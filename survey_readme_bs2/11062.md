# SmartHomeManager -- Automated Residential Systems Controller 2.0

## Description
This project aims to build a centralized, configurable smart device management and orchestration platform designed especially as a central nervous system to connect all aspects of modern automated residential environments into something easy manageable via APIs as local as possible without the need from internet connection and with full local storage. It moves the complexity of controlling numerous individual smart devices and platforms by creating one central system to control.

SmartHomeManagement utilizes an API-driven approach and provides REST endpoints for controlling lights (hue or standard), thermostats (nest or standard), cameras (IP cameras, security and baby monitors), music players (Son os/Spotify), locks, doors, garage gates, sensors, irrigation controllers, or others. It also has a built-in automation and event processing capability that lets users to automate actions. This enables complex interactions like setting a scene to adjust all aspects. 	

Under the hood of its system lies the event-driven architecture using message queue that allows decoupling of different modules and asynchronous operations which improves responsiveness and stability while allowing horizontal scalbility to add new features with minimal disruptions to core operations. Data from the various devices are stored securely and encrypted to ensure privacy and integrity. 

This project supports several device types and offers customizable automation routines for managing them through user friendly APIs. The goal to build a system as modular and customizable to accommodate a large variety of hardware and use cases as it can and it should support most mainstream platforms. It allows to connect different device ecosystems without requiring internet or cloud services by running locally. 

It has an advanced reporting module that can collect and analyze data on energy usage, temperature profiles to allow insights to improve performance and reduce expenses by generating reports and visualizations that allow to better identify trends and potential issues to address. Furthermore, the project has been tested extensively to ensure reliability and performance in real world usage. It has a strong foundation for further development and expansion.

 ##Installation Instructions
Before you begin with SmartHomeManager you have to setup all of required environment components to run smoothly. Please read through carefully as this might cause issues if skipped.

First things that you'd like to check for this installation process includes that you'd need an installed and working Python (v3 or superior) installation on the targeted device or system for running the software on the targeted machine. A virtual environment manager is also strongly encouraged for keeping your packages isolated as the dependencies of other project are kept apart.

Once the Python installation and the virtual environment setup is done and confirmed, please proceed and download or clone the git project.  Using `git checkout`, make sure you'd clone the latest or your prefered tag for the software to use, so it avoids any unexpected problems and issues that might occur if it're an early or pre-release version. 

After the project is cloned and available locally, please proceed and setup the virtual enviroment with all of required modules with this command using pip: `pip install --upgrade pip setuptools`. This command would also update the pip installer if it's older version.

Then after, to make the environment, you need to install modules with this command in a clean directory or inside a dedicated venv using: `pip install -r requirements.txt`.  Make sure there isn't another Python project that conflicts, or your system might run a very unpredictable outcome with errors.

Finally you need to make all necessary permissions so SmartHomeManager may access all of devices connected and controlled. On a system using the Linux family (e.g Ubuntu, Fedora) it needs `sudo apt install udev` installed to allow devices added automatically in future without a manual permission reset after adding it, but please make the right permissions before hand to keep a secure and functional device setup to suit all devices connected, 

Platform considerations on different systems are: MacOS uses homebrew, and on windows a similar manager such as choco might be more efficient when getting modules for SmartHomeManager setup and installation, so be prepared. It might need extra packages on older devices.

To verify, it can check that every required dependency has been installed successfully without issues by running it using this command. 	
After all packages, and environment are properly working. Proceeding into using `pip freeze > requirements.txt`, this generates your dependencies file in cases the project may migrate or deployed to some environments, for ease deployment. 	

After updates of versions on your dependencies, be ready that some code needs modification on SmartHomeManager's base and it may be required as an action of your choice and you'd know the source of these modifications by reading logs from installation to verify every package installation has occurred successfully, so there's no error during installation of dependencies,

Lastly it might require to have access from the user to certain device and services for it be running successfully without problems that can cause interruption in its running processes, 

For the system configuration to proceed to next phase, the following is recommended and it will be helpful, to run tests locally and see the project work properly before proceeding and modifying.
 

## Usage Instructions
Starting to utilize SmartHomeManager can easily get into using and testing basic operations for it to eventually become complex with many configurations and customizations on its automation behavior

Initially for simple tasks like toggling smart devices you will only have to send an HTTP POST or GET to endpoints that are defined on API. To do so please first you need access SmartHomeManager's server and you may do so using tools that are used such as cURL.  Example would be using a request with address http://localhost:5000/lights/living_room/on that can set living room lights ON using HTTP GET to change the value to a specified action to trigger and control it to conform and behave according user preferences. 

When setting more sophisticated routines that involves more events happening together at specified timing you can make and setup your automations. It has a configuration files and through these file you have all power needed for defining and maintaining rules. This files allows a blueprint with all details such that it is repeatable at any timing you set,

For an in-depth API exploration please refer to its comprehensive documentation for all accessible routes as each routes are complete in itself as to be functional without needing to depend with another. It includes full description as how they function as expected. This is also useful for building integration or third party application on this, so please review this to get better understanding, 

When setting automation it'll allow complex events that happen when one thing happens for instance "WHEN temperature exceed set temperature AND the windows open AND time reaches certain point THEN set HVAC and trigger alert". To setup the rule you must first add all required parameters into config with correct type to have everything configured for it,

To trigger a specific routine, there's an HTTP route which triggers and activates a specified name and you're also free and flexible of how you can call that, but please review all possible options. 

SmartHomeManager's reporting and visualization dashboard gives insight and overview of device usage over a long timeline for a detailed analysis as needed in order to understand patterns. It can generate daily/weekly/monthly summaries as well which helps you with decision to take. You should be using a compatible and modern browser that has JavaScript to fully enjoy this experience of SmartHomeManager. 

If using from script for advanced operations or to control every function through API is required then please see more details of the Python SDK, that helps developers create new integration to easily interact SmartHomeManager with their systems with full capabilities,

If your device or sensor sends signals outside its normal parameters. SmartHomeManager's anomaly detections will flag this to the administrator and send an alarm for them to act immediately, 
To update device, it supports both local device updating as remote over a patch update mechanism. The device updates can only proceed and run when connected.  If the network becomes unreachable for any reason or device goes down SmartHomeManager continues functioning without it to not compromise any existing system running in its environment, and waits and tries for connection to reestablish and proceed as usual without interruptions on user experience or operations that it performs in general,

Finally make the right configuration so you are sure you have everything properly set before running tests for it, it's always recommended and you will see less errors,

## Configuration
Configuration in SmartHomeManager can easily get configured using an YAML file. YAML offers simple configuration that can allow customization and adjustments based your requirements for the devices to integrate with your home network system, it has been optimized with security as it can allow only necessary configurations.

Firstly the project comes equipped with prebuilt YAML files to guide your setup to allow quick onboarding of a user for them to easily adapt. These are located on folder config and contains default values so SmartHomeManager works without a single manual adjustments

Next it allows custom addition, editing on existing YAML parameters for your devices, and also adding automation, so SmartHomeManager can react in specific ways, it has a flexible design for customization to conform with your architecture needs in order, to allow full automation

For sensitive values that shouldn&#x20;8217;t appear within YAML, like your wifi and device authentication information can also utilize an Environment Variable for better handling, which are read through the application and it can improve your project security as a result and protect information in general from potential security risks or attacks. It allows easy modifications when changing devices in future so your system is adaptable

SmartHomeManager can also support a custom logging configuration for it and the logs are stored locally so you are able to monitor events and issues that can appear as well, which are crucial when trying debug any system

SmartHomeManager is designed as scalable for large environments so parameters can be overridden by setting CLI arguments that will be used as an action during program run as the most prioritized option in configurations, allowing to perform changes in real-time for specific tests or situations

The project has several configurable items such as device timeouts to ensure it can respond to events without interruption as long a certain parameters meet and also it'll keep its responsiveness to all events in it's domain

It's important always backup configurations and make them accessible as needed so you don't risk any loss of valuable configurations and automation setups in a disaster case for it, to maintain stability. Also you may also use the CLI tool that's part of the program, and allow for validation of YAML files that will run a syntax test so you can be able avoid errors, which might slow you in debugging

To further ensure configurations work smoothly, run regular sanity checks, so your setup can conform for all requirements for the current system to function as intended and as a safeguard to protect the device and its operations from unexpected behaviors 

## Project Structure
SmartHomeManager adopts a layered, modular structure so it allows maintainability of code for it's users while it grows. Here you'll understand and appreciate this architecture and what each module serves and provides.

At root of your cloned or extracted source you would have main application scripts with all entrypoints that run SmartHomeManager and the entrypoint of the software. This script also contains the configuration loader that initializes it based settings found in the `config/` folder and sets all necessary values for running. 

Then it contains all modules of different device control that includes lights module and other such that is located under `/src/devices` that allows interaction, control as needed for the system to operate with various connected home smart appliances

Automations rules are defined, loaded and parsed under `/src/automations` directory.  This contains logic responsible on processing all triggers, conditional; to react appropriately to various device states. All routines and configurations found within it allows to customize how it responds in certain events that happen, 

There will also `/src/data/` that holds modules responsible as handling persistence data broadcasts or device statuses, logging of all actions to the logs for analysis

For running of test suites and unit test the location `/tests` folder contains and holds automated checks as validation. The project aims at 100% testing as a minimum so all code can work properly without problems 

Furthermore `configs/` houses YAML files to store various device information as routines, and all configurable options that the SmartHomeManager requires as an important piece that needs configuration. This allows a central configuration of device and automations.  These configs allows customization on your own without requiring to directly change any of code.

A utility script directory for command and advanced tasks that allows you modify settings on SmartHomeManager as required to make adjustments that aren't included and defined within normal routine

Documentation for users to help on configuring or understanding SmartHomeManager. The project aims a well written documents on each modules that it runs and the APIs exposed to interact it and how its system should function as expected to ease onboarding.
   
Lastly it will have all requirements file `requirements.txt` for installing and configuring its packages with its environment. It allows easy deployment.

## Contributing
SmartHomeManager project encourages community collaboration with developers who are keen with home automations systems, or interested contributing to the project as we welcome it,

Report bug fixes or features through the dedicated "Issue" board in its repository where all community member or contributors will work collaboratively and communicate to find best resolutions. Please review current issues and existing fixes as it might have duplicate solutions that you'll want contribute or resolve, 

Submit any proposed new changes to a pull request with all tests that have been passed as required with full tests coverage, for code quality and consistency, 

Please ensure coding is well organized with consistent coding guidelines that adheres on best-practices. Use descriptive names that helps others and future maintainer, so readability increases and understanding increases for them to comprehend on it easier as it allows ease for the future developers as it helps maintainability. It helps ease of collaboration as everyone knows on what it's supposed to do with it's name 

We appreciate any help or any suggestion from our contributors in terms improving SmartHomeManager.  We have specific code formatting rules so your contribution is properly merged with it for consistent formatting across the codebase for maintainability purposes to help it.
We will try respond and give feedback on your pull requests, for better and faster feedback and resolution in a quick turnaround for them and to keep it running as a project

We also accept contributions that include test coverage as a critical aspect that we expect. 

Please be kind, courteous and inclusive on your collaboration to ensure welcoming to every single contributor. This community welcomes every single contributor, no matter your backgrounds for it, it helps the system become inclusive in general to help everyone to benefit on SmartHomeManager

## License
SmartHomeManager project has licensed it for the Apache License, version 2.0 that ensures open-source project and can easily distribute within it

Users has freedom with its distribution, modifying the software in ways needed, and even commercial usage with few constraints or no restrictions to use for their needs

However users are obliged as maintaining copyright as notices of SmartHomeManager, which ensures attribution on SmartHomeManager original work. Please adhere the full licenses on this. This is an easy requirement that will not compromise your development as the software grows to your liking, but is a necessary condition for you being granted to this freedom

## Acknowledgments
The development and support of SmartHomeManager owes its thanks on many libraries, tools, contributors for their assistance.

Firstly it is deeply thankful with PyYAML package. For handling of the configs as the base on how SmartHomeManager is initialized and running and configured to support various setups for all of SmartHomeManagers requirements to be set, as an integral package. This project is a cornerstone to its foundation 

Also to the amazing work of MQTT community in general, because of MQTT libraries used, we had a reliable communication channel used for events inside system. The ability allows quick reactions in various device states and actions for all routines to execute

To openHAB contributors we are very much appreciative with them. This has helped us learn on different aspects on the home automations ecosystem as we developed ours 

Finally we would be also like thank the open source software development community in whole for it as their support allows and provides tools as a starting platform so development like SmartHomeManager will flourish with all resources from it 

## System Architecture
SmartHomeManager employs modular, message queue event driven as architecture so we're able handle complex automation as efficiently. Its modular allows scaling for different devices, and adding future modules with minimal disruption on core functionalities to allow for flexibility as much.

There lies main component that's the Controller. That serves as brain, central coordinator on SmartHomeManager to receive device stats or trigger, routing these to correct services, also it responsible for executing routines when needed, to ensure every automation works accordingly with what needs

Devices Module are dedicated as interfacing on SmartHomeManager to all devices that connects in its environment from thermostats to light switches, all these communicate on message bus so all components will receive all information to make actions based from those events

An Automactions Engines handles parsing configuration from yaml and triggers based rules defined by configuration so the appropriate actions will performed and it can trigger other module

There exist the EventBus module that manages queue as it is used so that different systems or device communicate to it resulting as an async communication so components won;t block as long each components operates,

We also implement an API layer which handles HTTP endpoints to provide flexibility and integration of different system that need interact to SmartHomeManager as well, for all of it needs

Lastly it contains persistence storage.  Storing data such history of sensor values, device actions.

## API Reference
SmartHomeManager's provides robust REST API so it can allow external integrations as needed. API allows extensive control and monitoring devices and automation from outside.  This allows third parties as other services.
All of its end point uses a json structure, to provide data. It also includes error responses for easy error-handlin for external consumers, to help developers.

`/devices` is main API that handles managing device with all available options.  This can be retrieving and also add, modify, deleting all information as required
 `/lights`: Manages and provides options of smart-light control. This includes setting lights names with actions
	* `GET /lights/{name}/on`: Set smart light with the defined "name" in your YAML config as being on

`/automations`: For defining and activating automated events with a configuration
   *  `POST /automations/{automation_name}/trigger`: To triggers an defined and configured named automations. 

`/reports`: Generates detailed reporting with various statistics
	*`GET /reports/energy-usage/daily` : To return detailed summary as how much daily electricity being used 
	* Error Response is a standard 400-style error that gives short messages and description. It's designed for debugging and understanding errors

We also plan adding a SDK that will help integrate SmartHomeManager more with other systems for effort ease in the coming months. This allows more complex integrations to become a seamless integration with ease of usage to everyone 

## Testing
We aim on achieving full automated coverage as possible with comprehensive suites, and this is a top prio to make system robust with minimal bugs and error

The suite uses the standard Python unittest module as its core. We are utilizing `pytest` to improve our suite testing processes so we're more streamlined on test processes for us and others who'd contribute to SmartHomeManager
Tests is categorized as follows to improve clarity, to have modular test setup for all areas and functionality 	
 	 * *Unit test:* These focus individual code module in an isolate context with specific mocks. These tests ensures a core module is well written
  * *Integration test:* These verifies how module works within one, so the components are working in the intended fashion with others as well
   * *Functional Test:* End to end scenario with real-word interactions of system for different user actions and routines.	

Before running a set tests we have an environment setup with mocked devices to ensure a realistic environment. You also need Python to install packages you might require with a simple:
   	 `pip install pytest -r requirements.txt`.  	 

Running of a all functional testing suites with one can easily invoke with the CLI. To test all test files you will need to write in a tests: folder you must do:
 `pytest`. It automatically discovers and execute tests with its configuration, which allows running tests and debugging issues 

If tests have passed with green then all of SmartHomeManager modules has met requirements as specified to have full code and automated functional behavior as required for system, which indicates system ready to deployed

## Troubleshooting
When you're setting or integrating it in an new device sometimes, issues may pop so please don\'t hesitate that SmartHomeManager can be debug easily for all potential errors as updates can improve system 

Most Common errors are caused from misconfiguration on device settings so check if they have a network connection or the proper API credentials for SmartHomeManager. If there isn\\&rsquot please review configuration YAML an